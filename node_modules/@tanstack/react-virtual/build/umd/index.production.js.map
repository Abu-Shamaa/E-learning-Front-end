{"version":3,"file":"index.production.js","sources":["../../../virtual-core/build/lib/_virtual/_rollupPluginBabelHelpers.mjs","../../../virtual-core/build/lib/utils.mjs","../../../virtual-core/build/lib/index.mjs","../../src/index.tsx"],"sourcesContent":["/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nexport { _extends as extends };\n//# sourceMappingURL=_rollupPluginBabelHelpers.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction memo(getDeps, fn, opts) {\n  var deps = [];\n  var result;\n  return function () {\n    var depTime;\n    if (opts.key && opts.debug != null && opts.debug()) depTime = Date.now();\n    var newDeps = getDeps();\n    var depsChanged = newDeps.length !== deps.length || newDeps.some(function (dep, index) {\n      return deps[index] !== dep;\n    });\n    if (!depsChanged) {\n      return result;\n    }\n    deps = newDeps;\n    var resultTime;\n    if (opts.key && opts.debug != null && opts.debug()) resultTime = Date.now();\n    result = fn.apply(void 0, newDeps);\n    opts == null ? void 0 : opts.onChange == null ? void 0 : opts.onChange(result);\n    if (opts.key && opts.debug != null && opts.debug()) {\n      var depEndTime = Math.round((Date.now() - depTime) * 100) / 100;\n      var resultEndTime = Math.round((Date.now() - resultTime) * 100) / 100;\n      var resultFpsPercentage = resultEndTime / 16;\n      var pad = function pad(str, num) {\n        str = String(str);\n        while (str.length < num) {\n          str = ' ' + str;\n        }\n        return str;\n      };\n      console.info(\"%c\\u23F1 \" + pad(resultEndTime, 5) + \" /\" + pad(depEndTime, 5) + \" ms\", \"\\n            font-size: .6rem;\\n            font-weight: bold;\\n            color: hsl(\" + Math.max(0, Math.min(120 - 120 * resultFpsPercentage, 120)) + \"deg 100% 31%);\", opts == null ? void 0 : opts.key);\n    }\n    return result;\n  };\n}\n\nexport { memo };\n//# sourceMappingURL=utils.mjs.map\n","/**\n * virtual-core\n *\n * Copyright (c) TanStack\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport { extends as _extends } from './_virtual/_rollupPluginBabelHelpers.mjs';\nimport { memo } from './utils.mjs';\nexport { memo } from './utils.mjs';\n\n//\n\n//\n\nvar defaultKeyExtractor = function defaultKeyExtractor(index) {\n  return index;\n};\nvar defaultRangeExtractor = function defaultRangeExtractor(range) {\n  var start = Math.max(range.startIndex - range.overscan, 0);\n  var end = Math.min(range.endIndex + range.overscan, range.count - 1);\n  var arr = [];\n  for (var _i = start; _i <= end; _i++) {\n    arr.push(_i);\n  }\n  return arr;\n};\nvar memoRectCallback = function memoRectCallback(instance, cb) {\n  var prev = {\n    height: -1,\n    width: -1\n  };\n  return function (rect) {\n    if (instance.options.horizontal ? rect.width !== prev.width : rect.height !== prev.height) {\n      cb(rect);\n    }\n    prev = rect;\n  };\n};\nvar observeElementRect = function observeElementRect(instance, cb) {\n  var observer = new ResizeObserver(function (entries) {\n    var _entries$, _entries$2;\n    cb({\n      width: (_entries$ = entries[0]) == null ? void 0 : _entries$.contentRect.width,\n      height: (_entries$2 = entries[0]) == null ? void 0 : _entries$2.contentRect.height\n    });\n  });\n  if (!instance.scrollElement) {\n    return;\n  }\n  cb(instance.scrollElement.getBoundingClientRect());\n  observer.observe(instance.scrollElement);\n  return function () {\n    observer.unobserve(instance.scrollElement);\n  };\n};\nvar observeWindowRect = function observeWindowRect(instance, cb) {\n  var memoizedCallback = memoRectCallback(instance, cb);\n  var onResize = function onResize() {\n    return memoizedCallback({\n      width: instance.scrollElement.innerWidth,\n      height: instance.scrollElement.innerHeight\n    });\n  };\n  if (!instance.scrollElement) {\n    return;\n  }\n  onResize();\n  instance.scrollElement.addEventListener('resize', onResize, {\n    capture: false,\n    passive: true\n  });\n  return function () {\n    instance.scrollElement.removeEventListener('resize', onResize);\n  };\n};\nvar scrollProps = {\n  element: ['scrollLeft', 'scrollTop'],\n  window: ['scrollX', 'scrollY']\n};\nvar createOffsetObserver = function createOffsetObserver(mode) {\n  return function (instance, cb) {\n    if (!instance.scrollElement) {\n      return;\n    }\n    var propX = scrollProps[mode][0];\n    var propY = scrollProps[mode][1];\n    var prevX = instance.scrollElement[propX];\n    var prevY = instance.scrollElement[propY];\n    var scroll = function scroll() {\n      var offset = instance.scrollElement[instance.options.horizontal ? propX : propY];\n      cb(offset);\n    };\n    scroll();\n    var onScroll = function onScroll(e) {\n      var target = e.currentTarget;\n      var scrollX = target[propX];\n      var scrollY = target[propY];\n      if (instance.options.horizontal ? prevX - scrollX : prevY - scrollY) {\n        scroll();\n      }\n      prevX = scrollX;\n      prevY = scrollY;\n    };\n    instance.scrollElement.addEventListener('scroll', onScroll, {\n      capture: false,\n      passive: true\n    });\n    return function () {\n      instance.scrollElement.removeEventListener('scroll', onScroll);\n    };\n  };\n};\nvar observeElementOffset = createOffsetObserver('element');\nvar observeWindowOffset = createOffsetObserver('window');\nvar measureElement = function measureElement(element, instance) {\n  return Math.round(element.getBoundingClientRect()[instance.options.horizontal ? 'width' : 'height']);\n};\nvar windowScroll = function windowScroll(offset, _ref, instance) {\n  var _instance$scrollEleme, _instance$scrollEleme2;\n  var _ref$adjustments = _ref.adjustments,\n    adjustments = _ref$adjustments === void 0 ? 0 : _ref$adjustments,\n    behavior = _ref.behavior;\n  var toOffset = offset + adjustments;\n  (_instance$scrollEleme = instance.scrollElement) == null ? void 0 : _instance$scrollEleme.scrollTo == null ? void 0 : _instance$scrollEleme.scrollTo((_instance$scrollEleme2 = {}, _instance$scrollEleme2[instance.options.horizontal ? 'left' : 'top'] = toOffset, _instance$scrollEleme2.behavior = behavior, _instance$scrollEleme2));\n};\nvar elementScroll = function elementScroll(offset, _ref2, instance) {\n  var _instance$scrollEleme3, _instance$scrollEleme4;\n  var _ref2$adjustments = _ref2.adjustments,\n    adjustments = _ref2$adjustments === void 0 ? 0 : _ref2$adjustments,\n    behavior = _ref2.behavior;\n  var toOffset = offset + adjustments;\n  (_instance$scrollEleme3 = instance.scrollElement) == null ? void 0 : _instance$scrollEleme3.scrollTo == null ? void 0 : _instance$scrollEleme3.scrollTo((_instance$scrollEleme4 = {}, _instance$scrollEleme4[instance.options.horizontal ? 'left' : 'top'] = toOffset, _instance$scrollEleme4.behavior = behavior, _instance$scrollEleme4));\n};\nvar Virtualizer = function Virtualizer(_opts) {\n  var _this = this;\n  this.unsubs = [];\n  this.scrollElement = null;\n  this.isScrolling = false;\n  this.isScrollingTimeoutId = null;\n  this.measurementsCache = [];\n  this.itemSizeCache = {};\n  this.pendingMeasuredCacheIndexes = [];\n  this.scrollDirection = null;\n  this.scrollAdjustments = 0;\n  this.measureElementCache = {};\n  this.pendingScrollToIndexCallback = null;\n  this.getResizeObserver = function () {\n    var _ro = null;\n    return function () {\n      if (_ro) {\n        return _ro;\n      } else if (typeof ResizeObserver !== 'undefined') {\n        return _ro = new ResizeObserver(function (entries) {\n          entries.forEach(function (entry) {\n            _this._measureElement(entry.target, false);\n          });\n        });\n      } else {\n        return null;\n      }\n    };\n  }();\n  this.range = {\n    startIndex: 0,\n    endIndex: 0\n  };\n  this.setOptions = function (opts) {\n    Object.entries(opts).forEach(function (_ref3) {\n      var key = _ref3[0],\n        value = _ref3[1];\n      if (typeof value === 'undefined') delete opts[key];\n    });\n    _this.options = _extends({\n      debug: false,\n      initialOffset: 0,\n      overscan: 1,\n      paddingStart: 0,\n      paddingEnd: 0,\n      scrollPaddingStart: 0,\n      scrollPaddingEnd: 0,\n      horizontal: false,\n      getItemKey: defaultKeyExtractor,\n      rangeExtractor: defaultRangeExtractor,\n      onChange: function onChange() {},\n      measureElement: measureElement,\n      initialRect: {\n        width: 0,\n        height: 0\n      },\n      scrollMargin: 0,\n      scrollingDelay: 150,\n      indexAttribute: 'data-index',\n      initialMeasurementsCache: []\n    }, opts);\n  };\n  this.notify = function () {\n    _this.options.onChange == null ? void 0 : _this.options.onChange(_this);\n  };\n  this.cleanup = function () {\n    _this.unsubs.filter(Boolean).forEach(function (d) {\n      return d();\n    });\n    _this.unsubs = [];\n    _this.scrollElement = null;\n  };\n  this._didMount = function () {\n    var ro = _this.getResizeObserver();\n    Object.values(_this.measureElementCache).forEach(function (node) {\n      return ro == null ? void 0 : ro.observe(node);\n    });\n    return function () {\n      ro == null ? void 0 : ro.disconnect();\n      _this.cleanup();\n    };\n  };\n  this._willUpdate = function () {\n    _this.pendingScrollToIndexCallback == null ? void 0 : _this.pendingScrollToIndexCallback();\n    var scrollElement = _this.options.getScrollElement();\n    if (_this.scrollElement !== scrollElement) {\n      _this.cleanup();\n      _this.scrollElement = scrollElement;\n      _this._scrollToOffset(_this.scrollOffset, {\n        adjustments: undefined,\n        behavior: undefined\n      });\n      _this.unsubs.push(_this.options.observeElementRect(_this, function (rect) {\n        _this.scrollRect = rect;\n        _this.calculateRange();\n      }));\n      _this.unsubs.push(_this.options.observeElementOffset(_this, function (offset) {\n        _this.scrollAdjustments = 0;\n        if (_this.scrollOffset === offset) {\n          return;\n        }\n        if (_this.isScrollingTimeoutId !== null) {\n          clearTimeout(_this.isScrollingTimeoutId);\n          _this.isScrollingTimeoutId = null;\n        }\n        var onIsScrollingChange = function onIsScrollingChange(isScrolling) {\n          if (_this.isScrolling !== isScrolling) {\n            _this.isScrolling = isScrolling;\n            _this.notify();\n          }\n        };\n        _this.scrollDirection = _this.scrollOffset < offset ? 'forward' : 'backward';\n        _this.scrollOffset = offset;\n        _this.calculateRange();\n        onIsScrollingChange(true);\n        _this.isScrollingTimeoutId = setTimeout(function () {\n          _this.isScrollingTimeoutId = null;\n          _this.scrollDirection = null;\n          onIsScrollingChange(false);\n        }, _this.options.scrollingDelay);\n      }));\n    } else if (!_this.isScrolling) {\n      _this.calculateRange();\n    }\n  };\n  this.getSize = function () {\n    return _this.scrollRect[_this.options.horizontal ? 'width' : 'height'];\n  };\n  this.getMeasurements = memo(function () {\n    return [_this.options.count, _this.options.paddingStart, _this.options.scrollMargin, _this.options.getItemKey, _this.itemSizeCache];\n  }, function (count, paddingStart, scrollMargin, getItemKey, itemSizeCache) {\n    var min = _this.pendingMeasuredCacheIndexes.length > 0 ? Math.min.apply(Math, _this.pendingMeasuredCacheIndexes) : 0;\n    _this.pendingMeasuredCacheIndexes = [];\n    var measurements = _this.measurementsCache.slice(0, min);\n    for (var _i2 = min; _i2 < count; _i2++) {\n      var key = getItemKey(_i2);\n      var measuredSize = itemSizeCache[key];\n      var start = measurements[_i2 - 1] ? measurements[_i2 - 1].end : paddingStart + scrollMargin;\n      var size = typeof measuredSize === 'number' ? measuredSize : _this.options.estimateSize(_i2);\n      var end = start + size;\n      measurements[_i2] = {\n        index: _i2,\n        start: start,\n        size: size,\n        end: end,\n        key: key\n      };\n    }\n    _this.measurementsCache = measurements;\n    return measurements;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getMeasurements',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.calculateRange = memo(function () {\n    return [_this.getMeasurements(), _this.getSize(), _this.scrollOffset];\n  }, function (measurements, outerSize, scrollOffset) {\n    var range = calculateRange({\n      measurements: measurements,\n      outerSize: outerSize,\n      scrollOffset: scrollOffset\n    });\n    if (range.startIndex !== _this.range.startIndex || range.endIndex !== _this.range.endIndex) {\n      _this.range = range;\n      _this.notify();\n    }\n    return _this.range;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'calculateRange',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.getIndexes = memo(function () {\n    return [_this.options.rangeExtractor, _this.range, _this.options.overscan, _this.options.count];\n  }, function (rangeExtractor, range, overscan, count) {\n    return rangeExtractor(_extends({}, range, {\n      overscan: overscan,\n      count: count\n    }));\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.indexFromElement = function (node) {\n    var attributeName = _this.options.indexAttribute;\n    var indexStr = node.getAttribute(attributeName);\n    if (!indexStr) {\n      console.warn(\"Missing attribute name '\" + attributeName + \"={index}' on measured element.\");\n      return -1;\n    }\n    return parseInt(indexStr, 10);\n  };\n  this._measureElement = function (node, _sync) {\n    var _this$itemSizeCache$i;\n    var index = _this.indexFromElement(node);\n    var item = _this.measurementsCache[index];\n    if (!item) {\n      return;\n    }\n    var prevNode = _this.measureElementCache[item.key];\n    var ro = _this.getResizeObserver();\n    if (!node.isConnected) {\n      if (prevNode) {\n        ro == null ? void 0 : ro.unobserve(prevNode);\n        delete _this.measureElementCache[item.key];\n      }\n      return;\n    }\n    if (!prevNode || prevNode !== node) {\n      if (prevNode) {\n        ro == null ? void 0 : ro.unobserve(prevNode);\n      }\n      _this.measureElementCache[item.key] = node;\n      ro == null ? void 0 : ro.observe(node);\n    }\n    var measuredItemSize = _this.options.measureElement(node, _this);\n    var itemSize = (_this$itemSizeCache$i = _this.itemSizeCache[item.key]) != null ? _this$itemSizeCache$i : item.size;\n    var delta = measuredItemSize - itemSize;\n    if (delta !== 0) {\n      var _extends2;\n      if (item.start < _this.scrollOffset && _this.isScrolling && _this.scrollDirection === 'backward') {\n        if (process.env.NODE_ENV !== 'production' && _this.options.debug) {\n          console.info('correction', delta);\n        }\n        _this._scrollToOffset(_this.scrollOffset, {\n          adjustments: _this.scrollAdjustments += delta,\n          behavior: undefined\n        });\n      }\n      _this.pendingMeasuredCacheIndexes.push(index);\n      _this.itemSizeCache = _extends({}, _this.itemSizeCache, (_extends2 = {}, _extends2[item.key] = measuredItemSize, _extends2));\n      _this.notify();\n    }\n  };\n  this.measureElement = function (node) {\n    if (!node) {\n      return;\n    }\n    _this._measureElement(node, true);\n  };\n  this.getVirtualItems = memo(function () {\n    return [_this.getIndexes(), _this.getMeasurements()];\n  }, function (indexes, measurements) {\n    var virtualItems = [];\n    for (var k = 0, len = indexes.length; k < len; k++) {\n      var _i3 = indexes[k];\n      var measurement = measurements[_i3];\n      virtualItems.push(measurement);\n    }\n    return virtualItems;\n  }, {\n    key: process.env.NODE_ENV !== 'production' && 'getIndexes',\n    debug: function debug() {\n      return _this.options.debug;\n    }\n  });\n  this.getOffsetForAlignment = function (toOffset, align) {\n    var offset = _this.scrollOffset;\n    var size = _this.getSize();\n    if (align === 'auto') {\n      if (toOffset <= offset) {\n        align = 'start';\n      } else if (toOffset >= offset + size) {\n        align = 'end';\n      } else {\n        align = 'start';\n      }\n    }\n    if (align === 'start') {\n      return toOffset;\n    } else if (align === 'end') {\n      return toOffset - size;\n    } else if (align === 'center') {\n      return toOffset - size / 2;\n    }\n    return toOffset;\n  };\n  this.scrollToOffset = function (toOffset, _temp) {\n    var _ref4 = _temp === void 0 ? {} : _temp,\n      _ref4$align = _ref4.align,\n      align = _ref4$align === void 0 ? 'start' : _ref4$align,\n      behavior = _ref4.behavior;\n    var options = {\n      adjustments: undefined,\n      behavior: behavior,\n      sync: false\n    };\n    _this._scrollToOffset(_this.getOffsetForAlignment(toOffset, align), options);\n  };\n  this.scrollToIndex = function (index, _temp2) {\n    var _ref5 = _temp2 === void 0 ? {} : _temp2,\n      _ref5$align = _ref5.align,\n      align = _ref5$align === void 0 ? 'auto' : _ref5$align,\n      behavior = _ref5.behavior;\n    _this.pendingScrollToIndexCallback = null;\n    var offset = _this.scrollOffset;\n    var size = _this.getSize();\n    var count = _this.options.count;\n    var measurements = _this.getMeasurements();\n    var measurement = measurements[Math.max(0, Math.min(index, count - 1))];\n    if (!measurement) {\n      throw new Error(\"VirtualItem not found for index = \" + index);\n    }\n    if (align === 'auto') {\n      if (measurement.end >= offset + size - _this.options.scrollPaddingEnd) {\n        align = 'end';\n      } else if (measurement.start <= offset + _this.options.scrollPaddingStart) {\n        align = 'start';\n      } else {\n        return;\n      }\n    }\n    var getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(measurement) {\n      var toOffset = align === 'end' ? measurement.end + _this.options.scrollPaddingEnd : measurement.start - _this.options.scrollPaddingStart;\n      return _this.getOffsetForAlignment(toOffset, align);\n    };\n    var toOffset = getOffsetForIndexAndAlignment(measurement);\n    if (Math.round(toOffset) === Math.round(offset)) {\n      return;\n    }\n    var options = {\n      adjustments: undefined,\n      behavior: behavior\n    };\n    _this._scrollToOffset(toOffset, options);\n    var isDynamic = Object.keys(_this.measureElementCache).length > 0;\n    if (isDynamic) {\n      _this.pendingScrollToIndexCallback = function () {\n        _this.scrollToIndex(index, {\n          align: align,\n          behavior: behavior\n        });\n      };\n    }\n  };\n  this.scrollBy = function (adjustments, options) {\n    _this._scrollToOffset(_this.scrollOffset, {\n      adjustments: adjustments,\n      behavior: options == null ? void 0 : options.behavior\n    });\n  };\n  this.getTotalSize = function () {\n    var _this$getMeasurements;\n    return (((_this$getMeasurements = _this.getMeasurements()[_this.options.count - 1]) == null ? void 0 : _this$getMeasurements.end) || _this.options.paddingStart) - _this.options.scrollMargin + _this.options.paddingEnd;\n  };\n  this._scrollToOffset = function (offset, _ref6) {\n    var adjustments = _ref6.adjustments,\n      behavior = _ref6.behavior;\n    _this.options.scrollToFn(offset, {\n      behavior: behavior,\n      adjustments: adjustments\n    }, _this);\n  };\n  this.measure = function () {\n    _this.itemSizeCache = {};\n    _this.notify();\n  };\n  this.setOptions(_opts);\n  this.scrollRect = this.options.initialRect;\n  this.scrollOffset = this.options.initialOffset;\n  this.measurementsCache = this.options.initialMeasurementsCache;\n  this.measurementsCache.forEach(function (item) {\n    _this.itemSizeCache[item.key] = item.size;\n  });\n  this.calculateRange();\n};\nvar findNearestBinarySearch = function findNearestBinarySearch(low, high, getCurrentValue, value) {\n  while (low <= high) {\n    var middle = (low + high) / 2 | 0;\n    var currentValue = getCurrentValue(middle);\n    if (currentValue < value) {\n      low = middle + 1;\n    } else if (currentValue > value) {\n      high = middle - 1;\n    } else {\n      return middle;\n    }\n  }\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\nfunction calculateRange(_ref7) {\n  var measurements = _ref7.measurements,\n    outerSize = _ref7.outerSize,\n    scrollOffset = _ref7.scrollOffset;\n  var count = measurements.length - 1;\n  var getOffset = function getOffset(index) {\n    return measurements[index].start;\n  };\n  var startIndex = findNearestBinarySearch(0, count, getOffset, scrollOffset);\n  var endIndex = startIndex;\n  while (endIndex < count && measurements[endIndex].end < scrollOffset + outerSize) {\n    endIndex++;\n  }\n  return {\n    startIndex: startIndex,\n    endIndex: endIndex\n  };\n}\n\nexport { Virtualizer, defaultKeyExtractor, defaultRangeExtractor, elementScroll, measureElement, observeElementOffset, observeElementRect, observeWindowOffset, observeWindowRect, windowScroll };\n//# sourceMappingURL=index.mjs.map\n","import * as React from 'react'\nimport {\n  elementScroll,\n  observeElementOffset,\n  observeElementRect,\n  observeWindowOffset,\n  observeWindowRect,\n  PartialKeys,\n  Virtualizer,\n  VirtualizerOptions,\n  windowScroll,\n} from '@tanstack/virtual-core'\nexport * from '@tanstack/virtual-core'\n\n//\n\nconst useIsomorphicLayoutEffect =\n  typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect\n\nfunction useVirtualizerBase<\n  TScrollElement extends Element | Window,\n  TItemElement extends Element,\n>(\n  options: VirtualizerOptions<TScrollElement, TItemElement>,\n): Virtualizer<TScrollElement, TItemElement> {\n  const rerender = React.useReducer(() => ({}), {})[1]\n\n  const resolvedOptions: VirtualizerOptions<TScrollElement, TItemElement> = {\n    ...options,\n    onChange: (instance) => {\n      rerender()\n      options.onChange?.(instance)\n    },\n  }\n\n  const [instance] = React.useState(\n    () => new Virtualizer<TScrollElement, TItemElement>(resolvedOptions),\n  )\n\n  instance.setOptions(resolvedOptions)\n\n  React.useEffect(() => {\n    return instance._didMount()\n  }, [])\n\n  useIsomorphicLayoutEffect(() => {\n    return instance._willUpdate()\n  })\n\n  return instance\n}\n\nexport function useVirtualizer<\n  TScrollElement extends Element,\n  TItemElement extends Element,\n>(\n  options: PartialKeys<\n    VirtualizerOptions<TScrollElement, TItemElement>,\n    'observeElementRect' | 'observeElementOffset' | 'scrollToFn'\n  >,\n): Virtualizer<TScrollElement, TItemElement> {\n  return useVirtualizerBase<TScrollElement, TItemElement>({\n    observeElementRect: observeElementRect,\n    observeElementOffset: observeElementOffset,\n    scrollToFn: elementScroll,\n    ...options,\n  })\n}\n\nexport function useWindowVirtualizer<TItemElement extends Element>(\n  options: PartialKeys<\n    VirtualizerOptions<Window, TItemElement>,\n    | 'getScrollElement'\n    | 'observeElementRect'\n    | 'observeElementOffset'\n    | 'scrollToFn'\n  >,\n): Virtualizer<Window, TItemElement> {\n  return useVirtualizerBase<Window, TItemElement>({\n    getScrollElement: () => (typeof window !== 'undefined' ? window : null!),\n    observeElementRect: observeWindowRect,\n    observeElementOffset: observeWindowOffset,\n    scrollToFn: windowScroll,\n    ...options,\n  })\n}\n"],"names":["_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","memo","getDeps","fn","opts","result","deps","depTime","debug","Date","now","resultTime","newDeps","some","dep","index","onChange","depEndTime","Math","round","resultEndTime","resultFpsPercentage","pad","str","num","String","console","info","max","min","defaultKeyExtractor","defaultRangeExtractor","range","start","startIndex","overscan","end","endIndex","count","arr","_i","push","observeElementRect","instance","cb","observer","ResizeObserver","entries","_entries$","_entries$2","width","contentRect","height","scrollElement","getBoundingClientRect","observe","unobserve","observeWindowRect","memoizedCallback","prev","rect","options","horizontal","memoRectCallback","onResize","innerWidth","innerHeight","addEventListener","capture","passive","removeEventListener","scrollProps","element","window","createOffsetObserver","mode","propX","propY","prevX","prevY","scroll","offset","onScroll","e","currentTarget","scrollX","scrollY","observeElementOffset","observeWindowOffset","measureElement","windowScroll","_ref","_instance$scrollEleme","_instance$scrollEleme2","_ref$adjustments","adjustments","behavior","toOffset","scrollTo","elementScroll","_ref2","_instance$scrollEleme3","_instance$scrollEleme4","_ref2$adjustments","Virtualizer","_opts","_ro","_this","unsubs","isScrolling","isScrollingTimeoutId","measurementsCache","itemSizeCache","pendingMeasuredCacheIndexes","scrollDirection","scrollAdjustments","measureElementCache","pendingScrollToIndexCallback","getResizeObserver","forEach","entry","_measureElement","setOptions","_ref3","initialOffset","paddingStart","paddingEnd","scrollPaddingStart","scrollPaddingEnd","getItemKey","rangeExtractor","initialRect","scrollMargin","scrollingDelay","indexAttribute","initialMeasurementsCache","notify","cleanup","filter","Boolean","d","_didMount","ro","values","node","disconnect","_willUpdate","getScrollElement","_scrollToOffset","scrollOffset","undefined","scrollRect","calculateRange","clearTimeout","onIsScrollingChange","setTimeout","getSize","getMeasurements","measurements","slice","_i2","measuredSize","size","estimateSize","outerSize","_ref7","low","high","getCurrentValue","value","middle","currentValue","findNearestBinarySearch","getIndexes","indexFromElement","attributeName","indexStr","getAttribute","parseInt","warn","_sync","_this$itemSizeCache$i","item","prevNode","isConnected","_extends2","measuredItemSize","delta","getVirtualItems","indexes","virtualItems","k","len","measurement","getOffsetForAlignment","align","scrollToOffset","_temp","_ref4","_ref4$align","sync","scrollToIndex","_temp2","_ref5","_ref5$align","Error","getOffsetForIndexAndAlignment","keys","scrollBy","getTotalSize","_this$getMeasurements","_ref6","scrollToFn","measure","useIsomorphicLayoutEffect","React","useLayoutEffect","useEffect","useVirtualizerBase","rerender","useReducer","resolvedOptions","useState"],"mappings":"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"}