/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).ReactVirtual={},e.React)}(this,(function(e,n){"use strict";function t(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var o=t(n);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},r.apply(this,arguments)}
/**
   * virtual-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function i(){return i=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},i.apply(this,arguments)}
/**
   * virtual-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function l(e,n,t){var o,r=[];return function(){var i;t.key&&null!=t.debug&&t.debug()&&(i=Date.now());var l,s=e();if(!(s.length!==r.length||s.some((function(e,n){return r[n]!==e}))))return o;if(r=s,t.key&&null!=t.debug&&t.debug()&&(l=Date.now()),o=n.apply(void 0,s),null==t||null==t.onChange||t.onChange(o),t.key&&null!=t.debug&&t.debug()){var u=Math.round(100*(Date.now()-i))/100,a=Math.round(100*(Date.now()-l))/100,c=a/16,f=function(e,n){for(e=String(e);e.length<n;)e=" "+e;return e};console.info("%câ± "+f(a,5)+" /"+f(u,5)+" ms","\n            font-size: .6rem;\n            font-weight: bold;\n            color: hsl("+Math.max(0,Math.min(120-120*c,120))+"deg 100% 31%);",null==t?void 0:t.key)}return o}}
/**
   * virtual-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */var s=function(e){return e},u=function(e){for(var n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),o=[],r=n;r<=t;r++)o.push(r);return o},a=function(e,n){var t=new ResizeObserver((function(e){var t,o;n({width:null==(t=e[0])?void 0:t.contentRect.width,height:null==(o=e[0])?void 0:o.contentRect.height})}));if(e.scrollElement)return n(e.scrollElement.getBoundingClientRect()),t.observe(e.scrollElement),function(){t.unobserve(e.scrollElement)}},c=function(e,n){var t=function(e,n){var t={height:-1,width:-1};return function(o){(e.options.horizontal?o.width!==t.width:o.height!==t.height)&&n(o),t=o}}(e,n),o=function(){return t({width:e.scrollElement.innerWidth,height:e.scrollElement.innerHeight})};if(e.scrollElement)return o(),e.scrollElement.addEventListener("resize",o,{capture:!1,passive:!0}),function(){e.scrollElement.removeEventListener("resize",o)}},f={element:["scrollLeft","scrollTop"],window:["scrollX","scrollY"]},d=function(e){return function(n,t){if(n.scrollElement){var o=f[e][0],r=f[e][1],i=n.scrollElement[o],l=n.scrollElement[r],s=function(){var e=n.scrollElement[n.options.horizontal?o:r];t(e)};s();var u=function(e){var t=e.currentTarget,u=t[o],a=t[r];(n.options.horizontal?i-u:l-a)&&s(),i=u,l=a};return n.scrollElement.addEventListener("scroll",u,{capture:!1,passive:!0}),function(){n.scrollElement.removeEventListener("scroll",u)}}}},h=d("element"),m=d("window"),g=function(e,n){return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},v=function(e,n,t){var o,r,i=n.adjustments,l=void 0===i?0:i,s=n.behavior,u=e+l;null==(o=t.scrollElement)||null==o.scrollTo||o.scrollTo(((r={})[t.options.horizontal?"left":"top"]=u,r.behavior=s,r))},p=function(e,n,t){var o,r,i=n.adjustments,l=void 0===i?0:i,s=n.behavior,u=e+l;null==(o=t.scrollElement)||null==o.scrollTo||o.scrollTo(((r={})[t.options.horizontal?"left":"top"]=u,r.behavior=s,r))},b=function(e){var n,t=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.measurementsCache=[],this.itemSizeCache={},this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache={},this.pendingScrollToIndexCallback=null,this.getResizeObserver=(n=null,function(){return n||("undefined"!=typeof ResizeObserver?n=new ResizeObserver((function(e){e.forEach((function(e){t._measureElement(e.target,!1)}))})):null)}),this.range={startIndex:0,endIndex:0},this.setOptions=function(e){Object.entries(e).forEach((function(n){var t=n[0];void 0===n[1]&&delete e[t]})),t.options=i({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:s,rangeExtractor:u,onChange:function(){},measureElement:g,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[]},e)},this.notify=function(){null==t.options.onChange||t.options.onChange(t)},this.cleanup=function(){t.unsubs.filter(Boolean).forEach((function(e){return e()})),t.unsubs=[],t.scrollElement=null},this._didMount=function(){var e=t.getResizeObserver();return Object.values(t.measureElementCache).forEach((function(n){return null==e?void 0:e.observe(n)})),function(){null==e||e.disconnect(),t.cleanup()}},this._willUpdate=function(){null==t.pendingScrollToIndexCallback||t.pendingScrollToIndexCallback();var e=t.options.getScrollElement();t.scrollElement!==e?(t.cleanup(),t.scrollElement=e,t._scrollToOffset(t.scrollOffset,{adjustments:void 0,behavior:void 0}),t.unsubs.push(t.options.observeElementRect(t,(function(e){t.scrollRect=e,t.calculateRange()}))),t.unsubs.push(t.options.observeElementOffset(t,(function(e){if(t.scrollAdjustments=0,t.scrollOffset!==e){null!==t.isScrollingTimeoutId&&(clearTimeout(t.isScrollingTimeoutId),t.isScrollingTimeoutId=null);var n=function(e){t.isScrolling!==e&&(t.isScrolling=e,t.notify())};t.scrollDirection=t.scrollOffset<e?"forward":"backward",t.scrollOffset=e,t.calculateRange(),n(!0),t.isScrollingTimeoutId=setTimeout((function(){t.isScrollingTimeoutId=null,t.scrollDirection=null,n(!1)}),t.options.scrollingDelay)}})))):t.isScrolling||t.calculateRange()},this.getSize=function(){return t.scrollRect[t.options.horizontal?"width":"height"]},this.getMeasurements=l((function(){return[t.options.count,t.options.paddingStart,t.options.scrollMargin,t.options.getItemKey,t.itemSizeCache]}),(function(e,n,o,r,i){var l=t.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,t.pendingMeasuredCacheIndexes):0;t.pendingMeasuredCacheIndexes=[];for(var s=t.measurementsCache.slice(0,l),u=l;u<e;u++){var a=r(u),c=i[a],f=s[u-1]?s[u-1].end:n+o,d="number"==typeof c?c:t.options.estimateSize(u),h=f+d;s[u]={index:u,start:f,size:d,end:h,key:a}}return t.measurementsCache=s,s}),{key:!1,debug:function(){return t.options.debug}}),this.calculateRange=l((function(){return[t.getMeasurements(),t.getSize(),t.scrollOffset]}),(function(e,n,o){var r=function(e){var n=e.measurements,t=e.outerSize,o=e.scrollOffset,r=n.length-1,i=function(e,n,t,o){for(;e<=n;){var r=(e+n)/2|0,i=t(r);if(i<o)e=r+1;else{if(!(i>o))return r;n=r-1}}return e>0?e-1:0}(0,r,(function(e){return n[e].start}),o),l=i;for(;l<r&&n[l].end<o+t;)l++;return{startIndex:i,endIndex:l}}({measurements:e,outerSize:n,scrollOffset:o});return r.startIndex===t.range.startIndex&&r.endIndex===t.range.endIndex||(t.range=r,t.notify()),t.range}),{key:!1,debug:function(){return t.options.debug}}),this.getIndexes=l((function(){return[t.options.rangeExtractor,t.range,t.options.overscan,t.options.count]}),(function(e,n,t,o){return e(i({},n,{overscan:t,count:o}))}),{key:!1,debug:function(){return t.options.debug}}),this.indexFromElement=function(e){var n=t.options.indexAttribute,o=e.getAttribute(n);return o?parseInt(o,10):(console.warn("Missing attribute name '"+n+"={index}' on measured element."),-1)},this._measureElement=function(e,n){var o,r=t.indexFromElement(e),l=t.measurementsCache[r];if(l){var s=t.measureElementCache[l.key],u=t.getResizeObserver();if(e.isConnected){s&&s===e||(s&&(null==u||u.unobserve(s)),t.measureElementCache[l.key]=e,null==u||u.observe(e));var a,c=t.options.measureElement(e,t),f=c-(null!=(o=t.itemSizeCache[l.key])?o:l.size);if(0!==f)l.start<t.scrollOffset&&t.isScrolling&&"backward"===t.scrollDirection&&t._scrollToOffset(t.scrollOffset,{adjustments:t.scrollAdjustments+=f,behavior:void 0}),t.pendingMeasuredCacheIndexes.push(r),t.itemSizeCache=i({},t.itemSizeCache,((a={})[l.key]=c,a)),t.notify()}else s&&(null==u||u.unobserve(s),delete t.measureElementCache[l.key])}},this.measureElement=function(e){e&&t._measureElement(e,!0)},this.getVirtualItems=l((function(){return[t.getIndexes(),t.getMeasurements()]}),(function(e,n){for(var t=[],o=0,r=e.length;o<r;o++){var i=n[e[o]];t.push(i)}return t}),{key:!1,debug:function(){return t.options.debug}}),this.getOffsetForAlignment=function(e,n){var o=t.scrollOffset,r=t.getSize();return"auto"===n&&(n=e<=o?"start":e>=o+r?"end":"start"),"start"===n?e:"end"===n?e-r:"center"===n?e-r/2:e},this.scrollToOffset=function(e,n){var o=void 0===n?{}:n,r=o.align,i=void 0===r?"start":r,l={adjustments:void 0,behavior:o.behavior,sync:!1};t._scrollToOffset(t.getOffsetForAlignment(e,i),l)},this.scrollToIndex=function(e,n){var o=void 0===n?{}:n,r=o.align,i=void 0===r?"auto":r,l=o.behavior;t.pendingScrollToIndexCallback=null;var s=t.scrollOffset,u=t.getSize(),a=t.options.count,c=t.getMeasurements()[Math.max(0,Math.min(e,a-1))];if(!c)throw new Error("VirtualItem not found for index = "+e);if("auto"===i)if(c.end>=s+u-t.options.scrollPaddingEnd)i="end";else{if(!(c.start<=s+t.options.scrollPaddingStart))return;i="start"}var f=function(e){var n="end"===i?e.end+t.options.scrollPaddingEnd:e.start-t.options.scrollPaddingStart;return t.getOffsetForAlignment(n,i)}(c);if(Math.round(f)!==Math.round(s)){var d={adjustments:void 0,behavior:l};t._scrollToOffset(f,d),Object.keys(t.measureElementCache).length>0&&(t.pendingScrollToIndexCallback=function(){t.scrollToIndex(e,{align:i,behavior:l})})}},this.scrollBy=function(e,n){t._scrollToOffset(t.scrollOffset,{adjustments:e,behavior:null==n?void 0:n.behavior})},this.getTotalSize=function(){var e;return((null==(e=t.getMeasurements()[t.options.count-1])?void 0:e.end)||t.options.paddingStart)-t.options.scrollMargin+t.options.paddingEnd},this._scrollToOffset=function(e,n){var o=n.adjustments,r=n.behavior;t.options.scrollToFn(e,{behavior:r,adjustments:o},t)},this.measure=function(){t.itemSizeCache={},t.notify()},this.setOptions(e),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach((function(e){t.itemSizeCache[e.key]=e.size})),this.calculateRange()};var E="undefined"!=typeof window?o.useLayoutEffect:o.useEffect;function O(e){var n=o.useReducer((function(){return{}}),{})[1],t=r({},e,{onChange:function(t){n(),null==e.onChange||e.onChange(t)}}),i=o.useState((function(){return new b(t)}))[0];return i.setOptions(t),o.useEffect((function(){return i._didMount()}),[]),E((function(){return i._willUpdate()})),i}e.Virtualizer=b,e.defaultKeyExtractor=s,e.defaultRangeExtractor=u,e.elementScroll=p,e.measureElement=g,e.memo=l,e.observeElementOffset=h,e.observeElementRect=a,e.observeWindowOffset=m,e.observeWindowRect=c,e.useVirtualizer=function(e){return O(r({observeElementRect:a,observeElementOffset:h,scrollToFn:p},e))},e.useWindowVirtualizer=function(e){return O(r({getScrollElement:function(){return"undefined"!=typeof window?window:null},observeElementRect:c,observeElementOffset:m,scrollToFn:v},e))},e.windowScroll=v,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.production.js.map
