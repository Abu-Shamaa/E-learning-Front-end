{"ast":null,"code":"import _slicedToArray from\"/home/shama/webapps/ionicblog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useMemo,useState,useEffect}from'react';import MaterialReactTable from'material-react-table';import{Box,IconButton,Tooltip}from'@mui/material';import{Input}from'@mui/icons-material';import baseUrl,{api}from'../../pages/Urls';import{IonContent}from'@ionic/react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";//nested data is ok, see accessorKeys in ColumnDef below\nvar CourseList=function CourseList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),course=_useState2[0],setCourse=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),courseData=_useState4[0],setCourseData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalOpen=_useState6[0],setModalOpen=_useState6[1];var fetchCourse=function fetchCourse(){fetch(\"\".concat(baseUrl).concat(api.allCourse),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(resp){return resp.json();}).then(function(resp){setCourse(resp.reverse());});};useEffect(function(){fetchCourse();},[]);var columns=useMemo(function(){return[{accessorKey:'id',//normal accessorKey\nheader:'ID',enableEditing:false,enableColumnOrdering:false,size:80},{accessorKey:'course_name',header:'Course Name'},{accessorKey:'description',header:'Description'}];},[]);var enroleCourse=function enroleCourse(id){if(window.confirm('Want to enrole this course?')){var data={'course_id':id};fetch(\"\".concat(baseUrl).concat(api.courseEnrole),{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))},body:JSON.stringify(data)}).then(function(response){if(response.status===200){alert('Enrole course Successfully');fetchCourse();}else{throw Error([response.status,response.statusText].join(' '));}}).catch(function(error){return console.log('error',error);});}};return/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-2\",children:\"List of Courses\"}),/*#__PURE__*/_jsx(MaterialReactTable,{columns:columns,data:course,getRowId:function getRowId(row){return\"\".concat(row.id);},enableRowActions:true,enableColumnOrdering:true,renderRowActions:function renderRowActions(_ref){var row=_ref.row,table=_ref.table;return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:'1rem'},children:/*#__PURE__*/_jsx(Tooltip,{arrow:true,placement:\"right\",title:\"Enrole-course\",children:/*#__PURE__*/_jsx(IconButton,{style:{color:\"green\"},onClick:function onClick(){return enroleCourse(row.id);},children:/*#__PURE__*/_jsx(Input,{})})})});}})]})});};export default CourseList;","map":{"version":3,"names":["React","useMemo","useState","useEffect","MaterialReactTable","Box","IconButton","Tooltip","Input","baseUrl","api","IonContent","CourseList","course","setCourse","courseData","setCourseData","modalOpen","setModalOpen","fetchCourse","fetch","allCourse","method","headers","Accept","localStorage","getItem","then","resp","json","reverse","columns","accessorKey","header","enableEditing","enableColumnOrdering","size","enroleCourse","id","window","confirm","data","courseEnrole","body","JSON","stringify","response","status","alert","Error","statusText","join","catch","error","console","log","row","table","display","gap","color"],"sources":["/home/shama/webapps/ionicblog/src/pages/teacher/CourseList.tsx"],"sourcesContent":["import React, { FC, useMemo, useState, useEffect, useRef } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport MaterialReactTable, {\n    MaterialReactTableProps,\n    MRT_Cell,\n    MRT_ColumnDef,\n    MRT_Row,\n} from 'material-react-table';\nimport {\n    Box,\n    IconButton,\n    Tooltip,\n} from '@mui/material';\nimport { Input } from '@mui/icons-material';\nimport baseUrl, { api } from '../../pages/Urls';\nimport { IonContent } from '@ionic/react';\ntype CourseData = {\n    id: string;\n    course_name: string;\n    description: string;\n\n};\n\n//nested data is ok, see accessorKeys in ColumnDef below\n\n\nconst CourseList: FC = () => {\n    const [course, setCourse] = useState([]);\n    const [courseData, setCourseData] = useState({});\n    const [modalOpen, setModalOpen] = useState(false);\n\n    const fetchCourse = () => {\n        fetch(`${baseUrl}${api.allCourse}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n\n            }\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                setCourse(resp.reverse())\n            })\n    }\n    useEffect(() => {\n        fetchCourse();\n\n    }, [])\n\n    const columns = useMemo<MRT_ColumnDef<CourseData>[]>(\n        () => [\n\n            {\n                accessorKey: 'id', //normal accessorKey\n                header: 'ID',\n                enableEditing: false,\n                enableColumnOrdering: false,\n                size: 80,\n            },\n            {\n                accessorKey: 'course_name',\n                header: 'Course Name',\n\n            },\n            {\n                accessorKey: 'description',\n                header: 'Description',\n\n            },\n\n        ],\n        [],\n    );\n\n    const enroleCourse = (id: any) => {\n        if (window.confirm('Want to enrole this course?')) {\n\n            let data = {\n                'course_id': id,\n            }\n            fetch(`${baseUrl}${api.courseEnrole}`, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n                },\n                body: JSON.stringify(data),\n\n            })\n\n                .then(response => {\n                    if (response.status === 200) {\n                        alert('Enrole course Successfully');\n                        fetchCourse();\n                    }\n                    else {\n                        throw Error([response.status, response.statusText].join(' '));\n                    }\n                })\n\n                .catch(error => console.log('error', error));\n\n        }\n\n    }\n    return (\n        <IonContent>\n            <div className=\"container mt-5\">\n                <h1 className='text-center mb-2'>List of Courses</h1>\n                <MaterialReactTable\n                    columns={columns}\n                    data={course}\n                    getRowId={(row => `${row.id}`)}\n                    enableRowActions\n                    enableColumnOrdering\n                    renderRowActions={({ row, table }) => (\n                        <Box sx={{ display: 'flex', gap: '1rem' }}>\n\n                            <Tooltip arrow placement=\"right\" title=\"Enrole-course\">\n                                <IconButton style={{ color: \"green\" }} onClick={() => enroleCourse(row.id)}>\n                                    <Input />\n                                </IconButton>\n                            </Tooltip>\n                        </Box>\n                    )}\n\n                />\n\n            </div>\n        </IonContent>\n\n    );\n\n};\n\nexport default CourseList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}