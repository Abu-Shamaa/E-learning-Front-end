{"ast":null,"code":"import _slicedToArray from\"/home/shama/webapps/ionicblog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useMemo,useState,useEffect}from'react';import MaterialReactTable from'material-react-table';import{Box,IconButton,Tooltip}from'@mui/material';import{Delete,Restore}from'@mui/icons-material';import baseUrl,{api}from'../../../pages/Urls';import{IonContent}from'@ionic/react';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";//nested data is ok, see accessorKeys in ColumnDef below\nvar TrashArticle=function TrashArticle(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),article=_useState2[0],setArticle=_useState2[1];var fetchTrash=function fetchTrash(){fetch(\"\".concat(baseUrl).concat(api.trashArticle),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(resp){return resp.json();}).then(function(resp){setArticle(resp.reverse());});};useEffect(function(){fetchTrash();},[]);var columns=useMemo(function(){return[{accessorKey:'id',//normal accessorKey\nheader:'ID',enableEditing:false,enableColumnOrdering:false,size:80},{accessorKey:'name',header:'Created By'},{accessorKey:'title',header:'Title'},{accessorKey:'slug',header:'Slug'},{accessorKey:'status',header:'Status',muiTableAccessorKeyProps:{}},{accessorKey:'date',header:'Date'}];},[]);var forceDelete=function forceDelete(id){if(window.confirm('Are you sure?')){fetch(\"\".concat(baseUrl).concat(api.forceDelete).concat(id),{method:'DELETE',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(res){return res.json();}).then(function(res){if(res){fetchTrash();}}).catch(function(error){return console.log('error',error);});}};var restore=function restore(id){if(window.confirm('Want to restore?')){fetch(\"\".concat(baseUrl).concat(api.restoreArticle).concat(id),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(res){if(res){fetchTrash();}}).catch(function(error){return console.log('error',error);});}};return/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-2\",children:\"List of Trash Articles\"}),/*#__PURE__*/_jsx(MaterialReactTable,{columns:columns,data:article,getRowId:function getRowId(row){return\"\".concat(row.id);},enableRowActions:true,enableColumnOrdering:true,renderRowActions:function renderRowActions(_ref){var row=_ref.row,table=_ref.table;return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:'1rem'},children:localStorage.getItem('role')=='ar_staff2'?'.......':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{arrow:true,placement:\"left\",title:\"Restore\",children:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return restore(row.id);},children:/*#__PURE__*/_jsx(Restore,{})})}),localStorage.getItem('role')=='ar_mgmt'?/*#__PURE__*/_jsx(Tooltip,{arrow:true,placement:\"right\",title:\"Delete\",children:/*#__PURE__*/_jsx(IconButton,{color:\"error\",onClick:function onClick(){return forceDelete(row.id);},children:/*#__PURE__*/_jsx(Delete,{})})}):'']})});}})]})});};export default TrashArticle;","map":{"version":3,"names":["React","useMemo","useState","useEffect","MaterialReactTable","Box","IconButton","Tooltip","Delete","Restore","baseUrl","api","IonContent","TrashArticle","article","setArticle","fetchTrash","fetch","trashArticle","method","headers","Accept","localStorage","getItem","then","resp","json","reverse","columns","accessorKey","header","enableEditing","enableColumnOrdering","size","muiTableAccessorKeyProps","forceDelete","id","window","confirm","res","catch","error","console","log","restore","restoreArticle","row","table","display","gap"],"sources":["/home/shama/webapps/ionicblog/src/pages/admin/articles/TrashArticle.tsx"],"sourcesContent":["import React, { FC, useMemo, useState, useEffect, useRef } from 'react';\nimport { useForm } from \"react-hook-form\";\nimport MaterialReactTable, {\n    MaterialReactTableProps,\n    MRT_Cell,\n    MRT_ColumnDef,\n    MRT_Row,\n} from 'material-react-table';\nimport {\n    Box,\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    IconButton,\n    MenuItem,\n    Stack,\n    TextField,\n    Tooltip,\n} from '@mui/material';\nimport { Delete, Restore } from '@mui/icons-material';\nimport baseUrl, { api } from '../../../pages/Urls';\nimport { IonContent } from '@ionic/react';\nimport { Typography } from '@mui/material';\ntype articleData = {\n    id: string;\n    name: string;\n    title: string;\n    slug: string;\n    date: string;\n    status: string;\n\n\n};\n\n//nested data is ok, see accessorKeys in ColumnDef below\n\n\nconst TrashArticle: FC = () => {\n    const [article, setArticle] = useState([]);\n    const fetchTrash = () => {\n        fetch(`${baseUrl}${api.trashArticle}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n\n            }\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                setArticle(resp.reverse())\n            })\n    }\n    useEffect(() => {\n        fetchTrash();\n    }, [])\n\n    const columns = useMemo<MRT_ColumnDef<articleData>[]>(\n        () => [\n\n            {\n                accessorKey: 'id', //normal accessorKey\n                header: 'ID',\n                enableEditing: false,\n                enableColumnOrdering: false,\n                size: 80,\n            },\n\n            {\n                accessorKey: 'name',\n                header: 'Created By',\n\n            },\n            {\n                accessorKey: 'title',\n                header: 'Title',\n\n            },\n            {\n                accessorKey: 'slug',\n                header: 'Slug',\n\n            },\n            {\n                accessorKey: 'status',\n                header: 'Status',\n                muiTableAccessorKeyProps: {\n\n                }\n            },\n            {\n                accessorKey: 'date',\n                header: 'Date',\n\n            },\n\n\n        ],\n        [],\n    );\n\n    const forceDelete = (id: any) => {\n        if (window.confirm('Are you sure?')) {\n            fetch(`${baseUrl}${api.forceDelete}${id}`, {\n                method: 'DELETE',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n\n                }\n\n            })\n\n                .then(res => res.json())\n                .then(res => {\n                    if (res) {\n                        fetchTrash();\n\n                    }\n\n                })\n                .catch(error => console.log('error', error));\n        }\n    }\n    const restore = (id: any) => {\n        if (window.confirm('Want to restore?')) {\n            fetch(`${baseUrl}${api.restoreArticle}${id}`, {\n                method: 'GET',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n\n                }\n\n            })\n\n                .then(res => {\n                    if (res) {\n                        fetchTrash();\n\n                    }\n                })\n                .catch(error => console.log('error', error));\n        }\n    }\n    return (\n        <IonContent>\n            <div className=\"container mt-5\">\n                <h1 className='text-center mb-2'>List of Trash Articles</h1>\n                <MaterialReactTable\n                    columns={columns}\n                    data={article}\n                    getRowId={(row => `${row.id}`)}\n                    enableRowActions\n                    enableColumnOrdering\n                    renderRowActions={({ row, table }) => (\n\n\n                        <Box sx={{ display: 'flex', gap: '1rem' }}>\n                            {(localStorage.getItem('role') == 'ar_staff2') ? '.......' :\n                                <>\n                                    <Tooltip arrow placement=\"left\" title=\"Restore\">\n                                        <IconButton onClick={() => restore(row.id)}>\n                                            <Restore />\n                                        </IconButton>\n                                    </Tooltip>\n                                    {(localStorage.getItem('role') == 'ar_mgmt') ?\n                                        <Tooltip arrow placement=\"right\" title=\"Delete\">\n                                            <IconButton color=\"error\" onClick={() => forceDelete(row.id)}>\n                                                <Delete />\n                                            </IconButton>\n                                        </Tooltip>\n                                        : ''}\n                                </>\n                            }\n\n                        </Box>\n\n\n                    )}\n\n                />\n\n            </div>\n        </IonContent>\n\n    );\n\n};\nexport default TrashArticle;"],"mappings":"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"},"metadata":{},"sourceType":"module"}