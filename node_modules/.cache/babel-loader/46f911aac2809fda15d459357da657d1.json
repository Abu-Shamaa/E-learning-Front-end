{"ast":null,"code":"import _slicedToArray from\"/mnt/disk2/ionicapps/elearn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{IonContent,IonCard,IonCardContent,IonCardHeader,IonCardTitle,IonCol,IonGrid,IonRow,IonItem,IonButton,IonNote}from'@ionic/react';import Box from'@mui/material/Box';import InputAdornment from'@mui/material/InputAdornment';import TextField from'@mui/material/TextField';import SearchIcon from'@mui/icons-material/Search';import React,{useState,useEffect}from'react';import baseUrl,{api}from'../pages/Urls';import{useHistory}from\"react-router\";import{Link}from'react-router-dom';import{format}from'date-fns';import ReactPaginate from\"react-paginate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),article=_useState2[0],setArticle=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allCategory=_useState4[0],setAllCategory=_useState4[1];var history=useHistory();var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),pageNumber=_useState6[0],setPageNumber=_useState6[1];var articlePerPage=10;var pagesVisited=pageNumber*articlePerPage;var pageCount=Math.ceil(article.length/articlePerPage);var changePage=function changePage(_ref){var selected=_ref.selected;setPageNumber(selected);};var fetchBlog=function fetchBlog(){fetch(\"\".concat(baseUrl).concat(api.blog),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(resp){return resp.json();}).then(function(resp){setArticle(resp.reverse());});};var fetchCategory=function fetchCategory(){fetch(\"\".concat(baseUrl).concat(api.allCategory),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(resp){return resp.json();}).then(function(resp){setAllCategory(resp);});};useEffect(function(){fetchBlog();fetchCategory();},[]);var search=function search(text){if(text){var matches=article.filter(function(item){var regex=new RegExp(\"\".concat(text),\"gi\");return item.title.match(regex);});setArticle(matches);}else{fetchBlog();}};return/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsx(IonGrid,{children:/*#__PURE__*/_jsxs(IonRow,{children:[/*#__PURE__*/_jsxs(IonCol,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-3 mb-5\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Articles Post\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:\"flex-end\",mx:1},children:/*#__PURE__*/_jsx(TextField,{id:\"input-with-icon-textfield\",InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{})})},variant:\"standard\",onChange:function onChange(e){return search(e.target.value);}})}),article.length!=0?/*#__PURE__*/_jsx(Box,{sx:{width:'100%',mb:2,mt:3},children:(articlePerPage>0?article.slice(pagesVisited,pagesVisited+articlePerPage):article).map(function(item,i){return/*#__PURE__*/_jsxs(IonCard,{children:[/*#__PURE__*/_jsx(IonCardHeader,{children:/*#__PURE__*/_jsx(IonCardTitle,{children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-primary\",children:/*#__PURE__*/_jsx(Link,{className:\"text-decoration-none\",to:\"/home/article/\".concat(item.slug),children:item.title})})})}),/*#__PURE__*/_jsx(IonCardContent,{children:format(new Date(item.date),'yyyy-MM-dd')})]},i.toString());})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(IonNote,{color:\"danger\",children:\"**Not match search data**\"})})]}),article.length!=0&&article.length>articlePerPage?/*#__PURE__*/_jsx(ReactPaginate,{nextLabel:\" >\",onPageChange:changePage,pageRangeDisplayed:3,marginPagesDisplayed:2,pageCount:pageCount,previousLabel:\"< \",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",previousClassName:\"page-item\",previousLinkClassName:\"page-link\",nextClassName:\"page-item\",nextLinkClassName:\"page-link\",breakLabel:\"...\",breakClassName:\"page-item\",breakLinkClassName:\"page-link\",containerClassName:\"pagination\",activeClassName:\"active\",renderOnZeroPageCount:null||undefined}):'']}),/*#__PURE__*/_jsx(IonCol,{size:\"auto\",children:/*#__PURE__*/_jsxs(\"div\",{style:{width:\"200px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Categories\"}),/*#__PURE__*/_jsx(IonItem,{children:/*#__PURE__*/_jsx(IonButton,{fill:\"clear\",onClick:function onClick(){return fetchBlog();},children:\"All Articles\"})}),allCategory.map(function(cat,i){return/*#__PURE__*/_jsx(IonItem,{children:/*#__PURE__*/_jsx(IonButton,{fill:\"clear\",children:/*#__PURE__*/_jsx(Link,{className:\"text-decoration-none\",to:\"/home/category/\".concat(cat.slug),children:cat.name})})},i.toString());})]})})]})})});};export default Home;","map":{"version":3,"names":["IonContent","IonCard","IonCardContent","IonCardHeader","IonCardTitle","IonCol","IonGrid","IonRow","IonItem","IonButton","IonNote","Box","InputAdornment","TextField","SearchIcon","React","useState","useEffect","baseUrl","api","useHistory","Link","format","ReactPaginate","Home","article","setArticle","allCategory","setAllCategory","history","pageNumber","setPageNumber","articlePerPage","pagesVisited","pageCount","Math","ceil","length","changePage","selected","fetchBlog","fetch","blog","method","headers","Accept","then","resp","json","reverse","fetchCategory","search","text","matches","filter","item","regex","RegExp","title","match","display","justifyContent","mx","startAdornment","e","target","value","width","mb","mt","slice","map","i","slug","Date","date","toString","undefined","cat","name"],"sources":["/mnt/disk2/ionicapps/elearn/src/pages/Home.tsx"],"sourcesContent":["import {\n    IonContent,\n    IonCard, IonCardContent, IonCardHeader, IonCardTitle,\n    IonCol, IonGrid, IonRow,\n    IonItem, IonButton, IonNote,\n\n} from '@ionic/react';\nimport Box from '@mui/material/Box';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport TextField from '@mui/material/TextField';\nimport SearchIcon from '@mui/icons-material/Search';\nimport React, { useState, useEffect } from 'react';\nimport baseUrl, { api } from '../pages/Urls';\nimport { useHistory } from \"react-router\";\nimport { Link } from 'react-router-dom';\nimport { format } from 'date-fns'\nimport ReactPaginate from \"react-paginate\";\nconst Home: React.FC = () => {\n    const [article, setArticle] = useState([]);\n    const [allCategory, setAllCategory] = useState([]);\n    const history = useHistory();\n    const [pageNumber, setPageNumber] = useState(0);\n    const articlePerPage = 10;\n    const pagesVisited = pageNumber * articlePerPage;\n    const pageCount = Math.ceil(article.length / articlePerPage);\n    const changePage = ({ selected }: any) => {\n        setPageNumber(selected);\n    };\n    const fetchBlog = () => {\n        fetch(`${baseUrl}${api.blog}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n\n            },\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                setArticle(resp.reverse())\n\n            })\n    }\n\n    const fetchCategory = () => {\n        fetch(`${baseUrl}${api.allCategory}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n\n\n            }\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                setAllCategory(resp)\n            })\n    }\n    useEffect(() => {\n        fetchBlog();\n        fetchCategory();\n    }, [])\n    const search = (text: any) => {\n        if (text) {\n            let matches = article.filter((item: any) => {\n                const regex = new RegExp(`${text}`, \"gi\");\n                return item.title.match(regex);\n            })\n            setArticle(matches);\n        } else {\n            fetchBlog();\n        }\n\n\n    };\n    return (\n        <IonContent>\n            <IonGrid>\n                <IonRow>\n                    <IonCol>\n                        <div className=\"container mt-3 mb-5\">\n                            <h2 >Recent Articles Post</h2>\n                            <hr />\n                            <Box sx={{ display: 'flex', justifyContent: \"flex-end\", mx: 1 }}>\n                                <TextField\n                                    id=\"input-with-icon-textfield\"\n                                    InputProps={{\n                                        startAdornment: (\n                                            <InputAdornment position=\"start\">\n                                                <SearchIcon />\n                                            </InputAdornment>\n                                        ),\n                                    }}\n                                    variant=\"standard\"\n                                    onChange={(e: any) => search(e.target.value)}\n                                />\n                            </Box>\n                            {\n                                article.length != 0 ?\n                                    <Box sx={{ width: '100%', mb: 2, mt: 3 }}>\n\n\n                                        {(articlePerPage > 0\n                                            ? article.slice(pagesVisited, pagesVisited + articlePerPage)\n                                            : article).map((item: any, i: any) => (\n                                                <IonCard key={i.toString()}>\n                                                    <IonCardHeader>\n                                                        <IonCardTitle>\n                                                            <h4 className=\"text-primary\"><Link className='text-decoration-none' to={`/home/article/${item.slug}`}>{item.title}</Link></h4>\n                                                        </IonCardTitle>\n\n                                                    </IonCardHeader>\n\n                                                    <IonCardContent>\n                                                        {format(new Date(item.date), 'yyyy-MM-dd')}\n                                                    </IonCardContent>\n                                                </IonCard>\n\n                                            ))}\n\n                                    </Box>\n                                    :\n                                    <div className='text-center mt-5'>\n                                        <IonNote color=\"danger\">**Not match search data**</IonNote>\n                                    </div>\n\n                            }\n\n\n                        </div>\n                        {article.length != 0 && article.length > articlePerPage ?\n                            <ReactPaginate\n                                nextLabel=\" >\"\n                                onPageChange={changePage}\n                                pageRangeDisplayed={3}\n                                marginPagesDisplayed={2}\n                                pageCount={pageCount}\n                                previousLabel=\"< \"\n                                pageClassName=\"page-item\"\n                                pageLinkClassName=\"page-link\"\n                                previousClassName=\"page-item\"\n                                previousLinkClassName=\"page-link\"\n                                nextClassName=\"page-item\"\n                                nextLinkClassName=\"page-link\"\n                                breakLabel=\"...\"\n                                breakClassName=\"page-item\"\n                                breakLinkClassName=\"page-link\"\n                                containerClassName=\"pagination\"\n                                activeClassName=\"active\"\n                                renderOnZeroPageCount={null || undefined}\n                            /> : ''}\n                    </IonCol>\n\n                    <IonCol size=\"auto\">\n\n                        <div style={{ width: \"200px\" }}>\n                            <h3>Categories</h3>\n\n                            <IonItem >\n                                <IonButton fill=\"clear\" onClick={() => fetchBlog()}>All Articles</IonButton>\n                            </IonItem>\n                            {allCategory.map((cat: any, i: any) =>\n                                <IonItem key={i.toString()}>\n                                    <IonButton fill=\"clear\">\n                                        <Link className='text-decoration-none' to={`/home/category/${cat.slug}`}>\n                                            {cat.name}\n                                        </Link>\n                                    </IonButton>\n                                </IonItem>\n                            )}\n\n\n                        </div>\n\n                    </IonCol>\n\n                </IonRow>\n            </IonGrid>\n\n        </IonContent>\n\n    );\n}\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module"}