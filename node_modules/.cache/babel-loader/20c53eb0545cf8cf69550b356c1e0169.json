{"ast":null,"code":"import _slicedToArray from\"/mnt/disk2/ionicapps/elearn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useMemo,useState,useEffect}from'react';import MaterialReactTable from'material-react-table';import{Box,IconButton,Tooltip}from'@mui/material';import{Delete,Restore}from'@mui/icons-material';import baseUrl,{api}from'../../../pages/Urls';import{IonContent}from'@ionic/react';import swal from'sweetalert';import{format}from'date-fns';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";//nested data is ok, see accessorKeys in ColumnDef below\nvar TrashArticle=function TrashArticle(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),article=_useState2[0],setArticle=_useState2[1];var fetchTrash=function fetchTrash(){fetch(\"\".concat(baseUrl).concat(api.trashArticle),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(resp){return resp.json();}).then(function(resp){setArticle(resp.reverse());});};useEffect(function(){fetchTrash();},[]);var columns=useMemo(function(){return[{accessorKey:'name',header:'Created By'},{accessorKey:'title',header:'Title'},{accessorKey:'slug',header:'Slug'},{accessorKey:'status',header:'Status',muiTableAccessorKeyProps:{}},{accessorFn:function accessorFn(row){return format(new Date(row.date),\"yyyy-MM-dd\");},accessorKey:'date',header:'Date'}];},[]);var forceDelete=function forceDelete(id){if(window.confirm('Are you sure?')){fetch(\"\".concat(baseUrl).concat(api.forceDelete).concat(id),{method:'DELETE',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(res){if(res.status===200){fetchTrash();swal({title:\"Success!\",text:\"Article deleted successfully\",icon:\"success\"});}else{swal({title:\"Error!\",text:res.status+' '+res.statusText+\" - Article not deleted\",icon:\"error\"});}}).catch(function(error){return console.log('error',error);});}};var restore=function restore(id){if(window.confirm('Want to restore?')){fetch(\"\".concat(baseUrl).concat(api.restoreArticle).concat(id),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(res){if(res.status===200){fetchTrash();swal({title:\"Success!\",text:\"Article restored successfully\",icon:\"success\"});}else{swal({title:\"Error!\",text:res.status+' '+res.statusText+\" - Article not restored\",icon:\"error\"});}}).catch(function(error){return console.log('error',error);});}};return/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-2\",children:\"List of Trash Articles\"}),/*#__PURE__*/_jsx(MaterialReactTable,{columns:columns,data:article,getRowId:function getRowId(row){return\"\".concat(row.id);},enableRowActions:true,positionActionsColumn:\"last\",enableRowNumbers:true,enableColumnOrdering:true,renderRowActions:function renderRowActions(_ref){var row=_ref.row,table=_ref.table;return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:'1rem'},children:localStorage.getItem('role')=='ar_staff2'?'.......':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Tooltip,{arrow:true,placement:\"left\",title:\"Restore\",children:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return restore(row.id);},children:/*#__PURE__*/_jsx(Restore,{})})}),localStorage.getItem('role')=='ar_mgmt'?/*#__PURE__*/_jsx(Tooltip,{arrow:true,placement:\"right\",title:\"Delete\",children:/*#__PURE__*/_jsx(IconButton,{color:\"error\",onClick:function onClick(){return forceDelete(row.id);},children:/*#__PURE__*/_jsx(Delete,{})})}):'']})});}})]})});};export default TrashArticle;","map":{"version":3,"names":["React","useMemo","useState","useEffect","MaterialReactTable","Box","IconButton","Tooltip","Delete","Restore","baseUrl","api","IonContent","swal","format","TrashArticle","article","setArticle","fetchTrash","fetch","trashArticle","method","headers","Accept","localStorage","getItem","then","resp","json","reverse","columns","accessorKey","header","muiTableAccessorKeyProps","accessorFn","row","Date","date","forceDelete","id","window","confirm","res","status","title","text","icon","statusText","catch","error","console","log","restore","restoreArticle","table","display","gap"],"sources":["/mnt/disk2/ionicapps/elearn/src/pages/admin/articles/TrashArticle.tsx"],"sourcesContent":["import React, { FC, useMemo, useState, useEffect } from 'react';\nimport MaterialReactTable, {\n    MRT_ColumnDef,\n\n} from 'material-react-table';\nimport {\n    Box,\n    IconButton,\n    Tooltip,\n} from '@mui/material';\nimport { Delete, Restore } from '@mui/icons-material';\nimport baseUrl, { api } from '../../../pages/Urls';\nimport { IonContent } from '@ionic/react';\nimport swal from 'sweetalert';\nimport { format } from 'date-fns';\ntype articleData = {\n    id: string;\n    name: string;\n    title: string;\n    slug: string;\n    date: string;\n    status: string;\n\n\n};\n\n//nested data is ok, see accessorKeys in ColumnDef below\n\n\nconst TrashArticle: FC = () => {\n    const [article, setArticle] = useState([]);\n    const fetchTrash = () => {\n        fetch(`${baseUrl}${api.trashArticle}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n\n            }\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                setArticle(resp.reverse())\n            })\n    }\n    useEffect(() => {\n        fetchTrash();\n    }, [])\n\n    const columns = useMemo<MRT_ColumnDef<articleData>[]>(\n        () => [\n\n            {\n                accessorKey: 'name',\n                header: 'Created By',\n\n            },\n            {\n                accessorKey: 'title',\n                header: 'Title',\n\n            },\n            {\n                accessorKey: 'slug',\n                header: 'Slug',\n\n            },\n            {\n                accessorKey: 'status',\n                header: 'Status',\n                muiTableAccessorKeyProps: {\n\n                }\n            },\n            {\n                accessorFn: (row) => format(new Date(row.date), \"yyyy-MM-dd\"),\n                accessorKey: 'date',\n                header: 'Date',\n\n            },\n\n\n        ],\n        [],\n    );\n\n    const forceDelete = (id: any) => {\n        if (window.confirm('Are you sure?')) {\n            fetch(`${baseUrl}${api.forceDelete}${id}`, {\n                method: 'DELETE',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n\n                }\n\n            })\n\n                .then(res => {\n                    if (res.status === 200) {\n                        fetchTrash();\n                        swal({\n                            title: \"Success!\",\n                            text: \"Article deleted successfully\",\n                            icon: \"success\",\n                        });\n                    } else {\n                        swal({\n                            title: \"Error!\",\n                            text: res.status + ' ' + res.statusText + \" - Article not deleted\",\n                            icon: \"error\",\n                        });\n                    }\n\n                })\n                .catch(error => console.log('error', error));\n        }\n    }\n    const restore = (id: any) => {\n        if (window.confirm('Want to restore?')) {\n            fetch(`${baseUrl}${api.restoreArticle}${id}`, {\n                method: 'GET',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n\n                }\n\n            })\n\n                .then(res => {\n                    if (res.status === 200) {\n                        fetchTrash();\n                        swal({\n                            title: \"Success!\",\n                            text: \"Article restored successfully\",\n                            icon: \"success\",\n                        });\n                    } else {\n                        swal({\n                            title: \"Error!\",\n                            text: res.status + ' ' + res.statusText + \" - Article not restored\",\n                            icon: \"error\",\n                        });\n                    }\n                })\n                .catch(error => console.log('error', error));\n        }\n    }\n    return (\n        <IonContent>\n            <div className=\"container mt-5\">\n                <h1 className='text-center mb-2'>List of Trash Articles</h1>\n                <MaterialReactTable\n                    columns={columns}\n                    data={article}\n                    getRowId={(row => `${row.id}`)}\n                    enableRowActions\n                    positionActionsColumn=\"last\"\n                    enableRowNumbers\n                    enableColumnOrdering\n                    renderRowActions={({ row, table }) => (\n\n\n                        <Box sx={{ display: 'flex', gap: '1rem' }}>\n                            {(localStorage.getItem('role') == 'ar_staff2') ? '.......' :\n                                <>\n                                    <Tooltip arrow placement=\"left\" title=\"Restore\">\n                                        <IconButton onClick={() => restore(row.id)}>\n                                            <Restore />\n                                        </IconButton>\n                                    </Tooltip>\n                                    {(localStorage.getItem('role') == 'ar_mgmt') ?\n                                        <Tooltip arrow placement=\"right\" title=\"Delete\">\n                                            <IconButton color=\"error\" onClick={() => forceDelete(row.id)}>\n                                                <Delete />\n                                            </IconButton>\n                                        </Tooltip>\n                                        : ''}\n                                </>\n                            }\n\n                        </Box>\n\n\n                    )}\n\n                />\n\n            </div>\n        </IonContent>\n\n    );\n\n};\nexport default TrashArticle;"],"mappings":"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"},"metadata":{},"sourceType":"module"}