{"ast":null,"code":"import _objectSpread from\"/mnt/disk2/ionicapps/elearn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/mnt/disk2/ionicapps/elearn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{IonCard,IonCardContent,IonCardHeader,IonButton,IonToolbar,IonTitle,IonInput,IonItem,IonLabel,IonHeader,IonContent}from\"@ionic/react\";import React,{useState}from\"react\";import{useHistory}from\"react-router\";import'./Style.css';import baseUrl,{api}from\"./Urls\";import{useForm}from\"react-hook-form\";import{ErrorMessage}from\"@hookform/error-message\";import swal from'sweetalert';import{yupResolver}from\"@hookform/resolvers/yup\";import*as yup from\"yup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var schema=yup.object().shape({email:yup.string().required('Email is required'),name:yup.string().required('Name is required'),password:yup.string().required('Password is required')});var SignUp=function SignUp(){var history=useHistory();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useForm=useForm({defaultValues:{email:'',name:'',password:''},resolver:yupResolver(schema)}),handleSubmit=_useForm.handleSubmit,register=_useForm.register,errors=_useForm.formState.errors,reset=_useForm.reset,watch=_useForm.watch;var handleChange=function handleChange(e){var eml=e.target.value;if(eml){fetch(\"\".concat(baseUrl).concat(api.checkUser).concat(eml),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(resp){return resp.json();}).then(function(res){if(Object.keys(res).length!=0){setError('Email already exists');}});}};//console.log(error)\nvar signUp=function signUp(e){fetch(\"\".concat(baseUrl).concat(api.signUp),{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify(e)}).then(function(response){if(response.status==200){history.replace(\"/login\");setError('');reset({email:'',name:'',password:''});swal({title:\"Success!\",text:\"SignUp successfull\",icon:\"success\"});}}).catch(function(error){console.log('error',error);});};return/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsx(\"div\",{className:\"contain\",children:/*#__PURE__*/_jsxs(IonCard,{children:[/*#__PURE__*/_jsx(IonCardHeader,{children:/*#__PURE__*/_jsx(IonHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonTitle,{children:\"Create Account\"})})})}),/*#__PURE__*/_jsx(IonCardContent,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(signUp),children:[/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Name\"}),/*#__PURE__*/_jsx(IonInput,_objectSpread({type:\"text\",placeholder:\"enter your full name\"},register(\"name\")))]}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:/*#__PURE__*/_jsx(ErrorMessage,{errors:errors,name:\"name\"})}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Email\"}),/*#__PURE__*/_jsx(IonInput,_objectSpread(_objectSpread({type:\"email\",placeholder:\"enter email\"},register(\"email\")),{},{onIonChange:function onIonChange(e){return handleChange(e);}}))]}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:/*#__PURE__*/_jsx(ErrorMessage,{errors:errors,name:\"email\"})}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error?error:''}),/*#__PURE__*/_jsxs(IonItem,{children:[/*#__PURE__*/_jsx(IonLabel,{position:\"stacked\",children:\"Password\"}),/*#__PURE__*/_jsx(IonInput,_objectSpread({type:\"password\",placeholder:\"password\"},register(\"password\")))]}),/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:/*#__PURE__*/_jsx(ErrorMessage,{errors:errors,name:\"password\"})}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"3%\"},children:/*#__PURE__*/_jsx(IonButton,{color:\"primary\",type:\"submit\",children:\"Sign Up\"})})]})})]})})});};export default SignUp;","map":{"version":3,"names":["IonCard","IonCardContent","IonCardHeader","IonButton","IonToolbar","IonTitle","IonInput","IonItem","IonLabel","IonHeader","IonContent","React","useState","useHistory","baseUrl","api","useForm","ErrorMessage","swal","yupResolver","yup","schema","object","shape","email","string","required","name","password","SignUp","history","error","setError","defaultValues","resolver","handleSubmit","register","errors","formState","reset","watch","handleChange","e","eml","target","value","fetch","checkUser","method","headers","Accept","then","resp","json","res","Object","keys","length","signUp","body","JSON","stringify","response","status","replace","title","text","icon","catch","console","log","color","marginTop"],"sources":["/mnt/disk2/ionicapps/elearn/src/pages/SignUp.tsx"],"sourcesContent":["import {\n    IonCard,\n    IonCardContent,\n    IonCardHeader,\n    IonButton,\n    IonToolbar,\n    IonTitle,\n    IonInput,\n    IonItem,\n    IonLabel,\n    IonHeader,\n    IonContent,\n\n} from \"@ionic/react\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport './Style.css';\nimport baseUrl, { api } from \"./Urls\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { ErrorMessage } from \"@hookform/error-message\";\nimport swal from 'sweetalert';\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nconst schema = yup.object().shape({\n    email: yup.string()\n        .required('Email is required'),\n\n    name: yup.string()\n        .required('Name is required'),\n    password: yup.string()\n        .required('Password is required')\n})\nconst SignUp: React.FC = () => {\n    const history = useHistory();\n    const [error, setError] = useState('');\n    const {\n        handleSubmit,\n        register,\n        formState: { errors },\n        reset,\n        watch\n    } = useForm({\n        defaultValues: {\n            email: '',\n            name: '',\n            password: '',\n\n\n        },\n        resolver: yupResolver(schema),\n    });\n\n    const handleChange = (e: any) => {\n\n        const eml = e.target.value;\n\n        if (eml) {\n            fetch(`${baseUrl}${api.checkUser}${eml}`, {\n                method: 'GET',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n\n                },\n            })\n                .then(resp => resp.json())\n                .then(res => {\n                    if (Object.keys(res).length != 0) {\n                        setError('Email already exists')\n                    }\n                })\n        }\n\n    }\n    //console.log(error)\n    const signUp = (e: any) => {\n\n\n        fetch(`${baseUrl}${api.signUp}`, {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n\n            },\n            body: JSON.stringify(e),\n        })\n\n            .then((response) => {\n\n                if (response.status == 200) {\n                    history.replace(\"/login\");\n                    setError('');\n                    reset({\n                        email: '',\n                        name: '',\n                        password: '',\n\n                    })\n                    swal({\n                        title: \"Success!\",\n                        text: \"SignUp successfull\",\n                        icon: \"success\",\n                    });\n                }\n\n            })\n\n\n\n            .catch(error => {\n                console.log('error', error)\n\n            });\n\n    }\n\n\n\n    return (\n        <IonContent>\n            <div className=\"contain\">\n                <IonCard>\n                    <IonCardHeader>\n                        <IonHeader>\n                            <IonToolbar>\n                                <IonTitle>Create Account</IonTitle>\n                            </IonToolbar>\n                        </IonHeader>\n                    </IonCardHeader>\n\n                    <IonCardContent>\n                        <form onSubmit={handleSubmit(signUp)}>\n                            <IonItem>\n                                <IonLabel position=\"stacked\">Name</IonLabel>\n                                <IonInput type=\"text\"\n\n                                    placeholder=\"enter your full name\"\n\n                                    {...register(\"name\")}\n\n                                >\n                                </IonInput>\n\n                            </IonItem>\n                            <p style={{ color: \"red\" }}>\n                                <ErrorMessage errors={errors} name=\"name\" />\n                            </p>\n\n                            <IonItem>\n                                <IonLabel position=\"stacked\">Email</IonLabel>\n                                <IonInput type=\"email\"\n                                    placeholder=\"enter email\"\n                                    {...register(\"email\")}\n                                    onIonChange={(e: any) => handleChange(e)}\n                                >\n                                </IonInput>\n\n                            </IonItem>\n                            <p style={{ color: \"red\" }}>\n                                <ErrorMessage errors={errors} name=\"email\" />\n                            </p>\n                            <p style={{ color: \"red\" }}>\n                                {error ? error : ''}\n                            </p>\n\n                            <IonItem>\n                                <IonLabel position=\"stacked\">Password</IonLabel>\n                                <IonInput type=\"password\"\n                                    placeholder=\"password\"\n                                    {...register(\"password\")}\n\n                                >\n                                </IonInput>\n                            </IonItem>\n                            <p style={{ color: \"red\" }}>\n                                <ErrorMessage errors={errors} name=\"password\" />\n                            </p>\n                            <div style={{ marginTop: \"3%\" }}>\n                                <IonButton color=\"primary\" type='submit'>Sign Up</IonButton>\n\n\n                            </div>\n                        </form>\n                    </IonCardContent>\n                </IonCard>\n            </div>\n        </IonContent>\n    );\n};\n\nexport default SignUp;"],"mappings":"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"},"metadata":{},"sourceType":"module"}