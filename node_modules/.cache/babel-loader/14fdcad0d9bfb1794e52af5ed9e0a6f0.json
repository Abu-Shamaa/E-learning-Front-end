{"ast":null,"code":"import _slicedToArray from\"/mnt/disk2/ionicapps/elearn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{IonCardHeader,IonToolbar,IonButtons,IonButton,IonCardContent,IonCard,IonItem,IonContent,IonCol,IonGrid,IonRow}from'@ionic/react';import React,{useState,useEffect}from'react';import{useHistory,useParams}from\"react-router\";import baseUrl,{api,web}from'../../../pages/Urls';import{format}from'date-fns';import Categories from'./Categories';import\"./ViewBlog.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";;;;;var ViewBlog=function ViewBlog(){var _article$user;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),article=_useState2[0],setArticle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(format(new Date(),'yyyy-MM-dd')),_useState8=_slicedToArray(_useState7,2),date=_useState8[0],setDate=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var history=useHistory();var _useParams=useParams(),slug=_useParams.slug;var viewArticle=function viewArticle(){fetch(\"\".concat(baseUrl).concat(api.viewArticle).concat(slug),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(resp){return resp.json();}).then(function(result){setArticle(result);setTitle(result.title);setContent(result.content);setDate(result.date);setCategory(result.category);});};useEffect(function(){viewArticle();},[]);return/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsx(IonGrid,{children:/*#__PURE__*/_jsxs(IonRow,{children:[/*#__PURE__*/_jsx(IonCol,{children:/*#__PURE__*/_jsx(IonCard,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-3 mb-5\",children:[/*#__PURE__*/_jsx(IonCardHeader,{children:/*#__PURE__*/_jsx(IonToolbar,{children:/*#__PURE__*/_jsx(IonButtons,{slot:\"start\",children:/*#__PURE__*/_jsxs(IonButton,{onClick:function onClick(){return history.goBack();},children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-backspace\",children:\" Back\"}),\" \"]})})})}),/*#__PURE__*/_jsxs(IonCardContent,{children:[/*#__PURE__*/_jsx(IonItem,{children:/*#__PURE__*/_jsx(\"h1\",{style:{fontWeight:'bold',fontSize:'2rem'},children:article===null||article===void 0?void 0:article.title})}),/*#__PURE__*/_jsx(IonItem,{children:/*#__PURE__*/_jsxs(\"h4\",{style:{color:'#666'},children:[\"Posted on \",article?format(new Date(article.date),'MMMM dd, yyyy'):'',\" by \",article===null||article===void 0?void 0:(_article$user=article.user)===null||_article$user===void 0?void 0:_article$user.name,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Categories: \"}),article===null||article===void 0?void 0:article.categories.map(function(category,i){return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(web.category,\"/\").concat(category.slug),children:category.name})});})]})}),/*#__PURE__*/_jsx(IonItem,{children:/*#__PURE__*/_jsx(\"div\",{id:\"article-content\",dangerouslySetInnerHTML:{__html:article?article.content:''}})}),/*#__PURE__*/_jsx(IonItem,{children:/*#__PURE__*/_jsx(IonGrid,{children:/*#__PURE__*/_jsxs(IonRow,{children:[/*#__PURE__*/_jsx(IonCol,{children:\" \"}),/*#__PURE__*/_jsx(IonCol,{children:category===null||category===void 0?void 0:category.map(function(item,i){return/*#__PURE__*/_jsx(\"a\",{className:\"text-decoration-none\",children:(i?', ':'')+item.name},i);})})]})})})]})]})})}),/*#__PURE__*/_jsx(IonCol,{size:\"auto\",children:/*#__PURE__*/_jsx(Categories,{})})]})})});};export default ViewBlog;","map":{"version":3,"names":["IonCardHeader","IonToolbar","IonButtons","IonButton","IonCardContent","IonCard","IonItem","IonContent","IonCol","IonGrid","IonRow","React","useState","useEffect","useHistory","useParams","baseUrl","api","web","format","Categories","ViewBlog","article","setArticle","title","setTitle","content","setContent","Date","date","setDate","category","setCategory","history","slug","viewArticle","fetch","method","headers","Accept","localStorage","getItem","then","resp","json","result","goBack","fontWeight","fontSize","color","user","name","categories","map","i","__html","item"],"sources":["/mnt/disk2/ionicapps/elearn/src/pages/user/blog/ViewBlog.tsx"],"sourcesContent":["\nimport {\n    IonCardHeader,\n    IonTitle,\n    IonToolbar,\n    IonButtons,\n    IonButton,\n    IonCardContent,\n    IonCard,\n    IonItem,\n    IonContent,\n    IonCol, IonGrid, IonRow\n\n} from '@ionic/react';\nimport React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from \"react-router\";\nimport baseUrl, { api, web } from '../../../pages/Urls';\nimport { format } from 'date-fns';\nimport Categories from './Categories';\nimport \"./ViewBlog.css\";\n\ninterface Category {\n    id: number,\n    name: string,\n    slug: string,\n};\n\ninterface Group {\n    id: number,\n    name: string,\n};\n\ninterface User {\n    id: number,\n    name: string,\n};\n\ninterface Article {\n    categories: Category[],\n    content: string,\n    created_at: string,\n    date: string,\n    deleted_at: string | null,\n    groups: Group[],\n    id: number,\n    ingroup: number,\n    slug: string,\n    status: string,\n    title: string,\n    updated_at: string,\n    user: User,\n    user_id: number,\n};\n\nconst ViewBlog: React.FC = () => {\n    type ViewBlogParams = {\n        slug: string;\n    };\n\n    const [article, setArticle] = useState<Article | null>(null);\n\n    const [title, setTitle] = useState('');\n    const [content, setContent] = useState('');\n    const [date, setDate] = useState(format(new Date(), 'yyyy-MM-dd'));\n    const [category, setCategory] = useState([]);\n\n    const history = useHistory();\n    const { slug } = useParams<ViewBlogParams>();\n\n    const viewArticle = () => {\n        fetch(`${baseUrl}${api.viewArticle}${slug}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem(\"token\")}`,\n            }\n        })\n            .then(resp => resp.json())\n            .then(result => {\n                setArticle(result);\n\n                setTitle(result.title);\n                setContent(result.content);\n                setDate(result.date);\n                setCategory(result.category);\n            })\n    }\n    useEffect(() => {\n        viewArticle();\n\n    }, [])\n\n    return (\n        <IonContent>\n            <IonGrid>\n                <IonRow>\n                    <IonCol>\n                        <IonCard>\n                            <div className=\"container mt-3 mb-5\">\n                                <IonCardHeader>\n                                    <IonToolbar>\n\n                                        <IonButtons slot=\"start\">\n                                            <IonButton onClick={() => history.goBack()} > <i className=\"bi bi-backspace\"> Back</i> </IonButton>\n                                        </IonButtons>\n                                    </IonToolbar>\n                                </IonCardHeader>\n\n\n                                <IonCardContent>\n                                    <IonItem>\n                                        <h1 style={{\n                                            fontWeight: 'bold',\n                                            fontSize: '2rem',\n                                        }}>{article?.title}</h1>\n                                    </IonItem>\n                                    <IonItem>\n                                        <h4 style={{\n                                            color: '#666',\n                                        }}>\n                                            Posted on {article ? format(new Date(article.date), 'MMMM dd, yyyy') : ''} by {article?.user?.name}<br />\n                                            <b>Categories: </b>\n                                            {article?.categories.map((category, i) => <span>\n                                                <a href={`${web.category}/${category.slug}`}>{category.name}</a>\n                                            </span>)}\n                                        </h4>\n                                    </IonItem>\n                                    <IonItem>\n                                        <div\n                                            id=\"article-content\"\n                                            dangerouslySetInnerHTML={{ __html: article ? article.content : '' }}\n                                        />\n                                    </IonItem>\n                                    <IonItem>\n                                        <IonGrid>\n                                            <IonRow>\n                                                <IonCol> </IonCol>\n                                                <IonCol>{category?.map((item: any, i: any) => {\n                                                    return <a key={i} className='text-decoration-none'>{(i ? ', ' : '') + item.name}</a>;\n                                                })}</IonCol>\n\n                                            </IonRow>\n                                        </IonGrid>\n\n                                    </IonItem>\n                                </IonCardContent>\n\n\n                            </div>\n                        </IonCard>\n                    </IonCol>\n\n                    <IonCol size=\"auto\">\n                        <Categories />\n                    </IonCol>\n                </IonRow>\n            </IonGrid>\n        </IonContent>\n    );\n};\nexport default ViewBlog;"],"mappings":"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"},"metadata":{},"sourceType":"module"}