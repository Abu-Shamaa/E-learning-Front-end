{"ast":null,"code":"import _slicedToArray from\"/mnt/disk2/ionicapps/elearn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{IonContent,IonCard,IonCardContent,IonCardHeader,IonCardTitle,IonCol,IonGrid,IonRow,IonNote}from'@ionic/react';import Box from'@mui/material/Box';import InputAdornment from'@mui/material/InputAdornment';import TextField from'@mui/material/TextField';import SearchIcon from'@mui/icons-material/Search';import React,{useState,useEffect}from'react';import baseUrl,{api}from'../pages/Urls';import{useHistory,useParams}from\"react-router\";import{Link}from'react-router-dom';import{format}from'date-fns';import ReactPaginate from\"react-paginate\";import Categories from'./user/blog/Categories';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useParams=useParams(),slug=_useParams.slug;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),article=_useState2[0],setArticle=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allCategory=_useState4[0],setAllCategory=_useState4[1];var history=useHistory();var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),pageNumber=_useState6[0],setPageNumber=_useState6[1];var articlePerPage=10;var pagesVisited=pageNumber*articlePerPage;var pageCount=Math.ceil(article.length/articlePerPage);var changePage=function changePage(_ref){var selected=_ref.selected;setPageNumber(selected);};var fetchBlog=function fetchBlog(){fetch(slug?\"\".concat(baseUrl).concat(api.catArticle).concat(slug):\"\".concat(baseUrl).concat(api.blog),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(resp){return resp.json();}).then(function(resp){setArticle(resp);});};var fetchCategory=function fetchCategory(){fetch(\"\".concat(baseUrl).concat(api.allCategory),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json'}}).then(function(resp){return resp.json();}).then(function(resp){setAllCategory(resp);});};useEffect(function(){fetchBlog();fetchCategory();},[]);useEffect(function(){fetchBlog();},[slug]);var search=function search(text){if(text){var matches=article.filter(function(item){var regex=new RegExp(\"\".concat(text),\"gi\");return item.title.match(regex);});setArticle(matches);}else{fetchBlog();}};return/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsx(IonGrid,{children:/*#__PURE__*/_jsxs(IonRow,{children:[/*#__PURE__*/_jsxs(IonCol,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-3 mb-5\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Articles Post\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:\"flex-end\",mx:1},children:/*#__PURE__*/_jsx(TextField,{id:\"input-with-icon-textfield\",InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(SearchIcon,{})})},variant:\"standard\",onChange:function onChange(e){return search(e.target.value);}})}),article.length!=0?/*#__PURE__*/_jsx(Box,{sx:{width:'100%',mb:2,mt:3},children:(articlePerPage>0?article.slice(pagesVisited,pagesVisited+articlePerPage):article).map(function(item,i){return/*#__PURE__*/_jsxs(IonCard,{children:[/*#__PURE__*/_jsx(IonCardHeader,{children:/*#__PURE__*/_jsx(IonCardTitle,{children:/*#__PURE__*/_jsx(\"h4\",{className:\"text-primary\",children:/*#__PURE__*/_jsx(Link,{className:\"text-decoration-none\",to:\"/\".concat(format(new Date(item.date),'yyyy'),\"/\").concat(format(new Date(item.date),'MM'),\"/\").concat(format(new Date(item.date),'dd'),\"/\").concat(item.slug),children:item.title})})})}),/*#__PURE__*/_jsx(IonCardContent,{children:format(new Date(item.date),'MMMM dd, yyyy')})]},i.toString());})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-5\",children:/*#__PURE__*/_jsx(IonNote,{color:\"danger\",children:\"**Not match search data**\"})})]}),article.length!=0&&article.length>articlePerPage?/*#__PURE__*/_jsx(ReactPaginate,{nextLabel:\" >\",onPageChange:changePage,pageRangeDisplayed:3,marginPagesDisplayed:2,pageCount:pageCount,previousLabel:\"< \",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",previousClassName:\"page-item\",previousLinkClassName:\"page-link\",nextClassName:\"page-item\",nextLinkClassName:\"page-link\",breakLabel:\"...\",breakClassName:\"page-item\",breakLinkClassName:\"page-link\",containerClassName:\"pagination\",activeClassName:\"active\",renderOnZeroPageCount:null||undefined}):'']}),/*#__PURE__*/_jsx(IonCol,{size:\"auto\",children:/*#__PURE__*/_jsx(Categories,{})})]})})});};export default Home;","map":{"version":3,"names":["IonContent","IonCard","IonCardContent","IonCardHeader","IonCardTitle","IonCol","IonGrid","IonRow","IonNote","Box","InputAdornment","TextField","SearchIcon","React","useState","useEffect","baseUrl","api","useHistory","useParams","Link","format","ReactPaginate","Categories","Home","slug","article","setArticle","allCategory","setAllCategory","history","pageNumber","setPageNumber","articlePerPage","pagesVisited","pageCount","Math","ceil","length","changePage","selected","fetchBlog","fetch","catArticle","blog","method","headers","Accept","localStorage","getItem","then","resp","json","fetchCategory","search","text","matches","filter","item","regex","RegExp","title","match","display","justifyContent","mx","startAdornment","e","target","value","width","mb","mt","slice","map","i","Date","date","toString","undefined"],"sources":["/mnt/disk2/ionicapps/elearn/src/pages/Home.tsx"],"sourcesContent":["import {\n    IonContent,\n    IonCard, IonCardContent, IonCardHeader, IonCardTitle,\n    IonCol, IonGrid, IonRow,\n    IonItem, IonButton, IonNote,\n\n} from '@ionic/react';\nimport Box from '@mui/material/Box';\nimport InputAdornment from '@mui/material/InputAdornment';\nimport TextField from '@mui/material/TextField';\nimport SearchIcon from '@mui/icons-material/Search';\nimport React, { useState, useEffect } from 'react';\nimport baseUrl, { api } from '../pages/Urls';\nimport { useHistory, useParams } from \"react-router\";\nimport { Link } from 'react-router-dom';\nimport { format } from 'date-fns'\nimport ReactPaginate from \"react-paginate\";\nimport Categories from './user/blog/Categories';\n\ntype ArticleCategoryParams = {\n    slug: string | undefined;\n};\n\nconst Home: React.FC = () => {\n    const { slug } = useParams<ArticleCategoryParams>();\n\n    const [article, setArticle] = useState([]);\n    const [allCategory, setAllCategory] = useState([]);\n    const history = useHistory();\n    const [pageNumber, setPageNumber] = useState(0);\n    const articlePerPage = 10;\n    const pagesVisited = pageNumber * articlePerPage;\n    const pageCount = Math.ceil(article.length / articlePerPage);\n\n    const changePage = ({ selected }: any) => {\n        setPageNumber(selected);\n    };\n\n    const fetchBlog = () => {\n        fetch(slug ? `${baseUrl}${api.catArticle}${slug}` : `${baseUrl}${api.blog}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n            },\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                setArticle(resp);\n            })\n    }\n\n    const fetchCategory = () => {\n        fetch(`${baseUrl}${api.allCategory}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n            }\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                setAllCategory(resp)\n            })\n    };\n\n    useEffect(() => {\n        fetchBlog();\n        fetchCategory();\n    }, []);\n\n    useEffect(() => {\n        fetchBlog();\n    }, [slug]);\n\n    const search = (text: any) => {\n        if (text) {\n            let matches = article.filter((item: any) => {\n                const regex = new RegExp(`${text}`, \"gi\");\n                return item.title.match(regex);\n            })\n            setArticle(matches);\n        } else {\n            fetchBlog();\n        }\n    };\n\n    return (\n        <IonContent>\n            <IonGrid>\n                <IonRow>\n                    <IonCol>\n                        <div className=\"container mt-3 mb-5\">\n                            <h2 >Recent Articles Post</h2>\n                            <hr />\n                            <Box sx={{ display: 'flex', justifyContent: \"flex-end\", mx: 1 }}>\n                                <TextField\n                                    id=\"input-with-icon-textfield\"\n                                    InputProps={{\n                                        startAdornment: (\n                                            <InputAdornment position=\"start\">\n                                                <SearchIcon />\n                                            </InputAdornment>\n                                        ),\n                                    }}\n                                    variant=\"standard\"\n                                    onChange={(e: any) => search(e.target.value)}\n                                />\n                            </Box>\n                            {\n                                article.length != 0 ?\n                                    <Box sx={{ width: '100%', mb: 2, mt: 3 }}>\n                                        {(articlePerPage > 0\n                                            ? article.slice(pagesVisited, pagesVisited + articlePerPage)\n                                            : article).map((item: any, i: any) => (\n\n                                                <IonCard key={i.toString()}>\n                                                    <IonCardHeader>\n                                                        <IonCardTitle>\n                                                            <h4 className=\"text-primary\">\n                                                                <Link\n                                                                    className='text-decoration-none'\n                                                                    to={`/${format(new Date(item.date), 'yyyy')}/${format(new Date(item.date), 'MM')}/${format(new Date(item.date), 'dd')}/${item.slug}`}>{item.title}\n                                                                </Link>\n                                                            </h4>\n                                                        </IonCardTitle>\n                                                    </IonCardHeader>\n\n                                                    <IonCardContent>\n                                                        {format(new Date(item.date), 'MMMM dd, yyyy')}\n                                                    </IonCardContent>\n                                                </IonCard>\n\n                                            ))}\n                                    </Box>\n                                    :\n                                    <div className='text-center mt-5'>\n                                        <IonNote color=\"danger\">**Not match search data**</IonNote>\n                                    </div>\n                            }\n                        </div>\n                        {article.length != 0 && article.length > articlePerPage ?\n                            <ReactPaginate\n                                nextLabel=\" >\"\n                                onPageChange={changePage}\n                                pageRangeDisplayed={3}\n                                marginPagesDisplayed={2}\n                                pageCount={pageCount}\n                                previousLabel=\"< \"\n                                pageClassName=\"page-item\"\n                                pageLinkClassName=\"page-link\"\n                                previousClassName=\"page-item\"\n                                previousLinkClassName=\"page-link\"\n                                nextClassName=\"page-item\"\n                                nextLinkClassName=\"page-link\"\n                                breakLabel=\"...\"\n                                breakClassName=\"page-item\"\n                                breakLinkClassName=\"page-link\"\n                                containerClassName=\"pagination\"\n                                activeClassName=\"active\"\n                                renderOnZeroPageCount={null || undefined}\n                            /> : ''}\n                    </IonCol>\n\n                    <IonCol size=\"auto\">\n                        <Categories />\n                    </IonCol>\n                </IonRow>\n            </IonGrid>\n        </IonContent>\n    );\n}\nexport default Home;"],"mappings":"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"},"metadata":{},"sourceType":"module"}