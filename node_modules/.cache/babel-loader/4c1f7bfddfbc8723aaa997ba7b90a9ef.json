{"ast":null,"code":"import _slicedToArray from\"/home/shama/webapps/ionicblog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useMemo,useState,useEffect}from'react';import MaterialReactTable from'material-react-table';import{Box,IconButton,Tooltip}from'@mui/material';import{Input}from'@mui/icons-material';import baseUrl,{api}from'../../pages/Urls';import{IonContent}from'@ionic/react';import swal from'sweetalert';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CourseList=function CourseList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),course=_useState2[0],setCourse=_useState2[1];var fetchCourse=function fetchCourse(){fetch(\"\".concat(baseUrl).concat(api.allCourse),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))}}).then(function(resp){return resp.json();}).then(function(resp){setCourse(resp.reverse());});};useEffect(function(){fetchCourse();},[]);var columns=useMemo(function(){return[{accessorKey:'course_name',header:'Course Name'},{accessorKey:'description',header:'Description'}];},[]);var enroleCourse=function enroleCourse(id){if(window.confirm('Want to enrole this course?')){var data={'course_id':id};fetch(\"\".concat(baseUrl).concat(api.courseEnrole),{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json','Authorization':\"Bearer \".concat(localStorage.getItem(\"token\"))},body:JSON.stringify(data)}).then(function(response){if(response.status===200){fetchCourse();swal({title:\"Success!\",text:\"Course enroled successfully\",icon:\"success\"});}else{throw Error([response.status,response.statusText].join(' '));}}).catch(function(error){return console.log('error',error);});}};return/*#__PURE__*/_jsx(IonContent,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mb-2\",children:\"List of Courses\"}),localStorage.getItem(\"role\")=='ar_instructor'?/*#__PURE__*/_jsx(MaterialReactTable,{columns:columns,data:course,getRowId:function getRowId(row){return\"\".concat(row.id);},enableRowNumbers:true,enableColumnOrdering:true}):/*#__PURE__*/_jsx(MaterialReactTable,{columns:columns,data:course,getRowId:function getRowId(row){return\"\".concat(row.id);},enableRowActions:true,enableRowNumbers:true,enableColumnOrdering:true,renderRowActions:function renderRowActions(_ref){var row=_ref.row,table=_ref.table;return/*#__PURE__*/_jsx(Box,{sx:{display:'flex',gap:'1rem'},children:/*#__PURE__*/_jsx(Tooltip,{arrow:true,placement:\"right\",title:\"Enrole-course\",children:/*#__PURE__*/_jsx(IconButton,{style:{color:\"green\"},onClick:function onClick(){return enroleCourse(row.id);},children:/*#__PURE__*/_jsx(Input,{})})})});}})]})});};export default CourseList;","map":{"version":3,"names":["React","useMemo","useState","useEffect","MaterialReactTable","Box","IconButton","Tooltip","Input","baseUrl","api","IonContent","swal","CourseList","course","setCourse","fetchCourse","fetch","allCourse","method","headers","Accept","localStorage","getItem","then","resp","json","reverse","columns","accessorKey","header","enroleCourse","id","window","confirm","data","courseEnrole","body","JSON","stringify","response","status","title","text","icon","Error","statusText","join","catch","error","console","log","row","table","display","gap","color"],"sources":["/home/shama/webapps/ionicblog/src/pages/teacher/CourseList.tsx"],"sourcesContent":["import React, { FC, useMemo, useState, useEffect } from 'react';\nimport MaterialReactTable, {\n    MRT_ColumnDef,\n\n} from 'material-react-table';\nimport {\n    Box,\n    IconButton,\n    Tooltip,\n} from '@mui/material';\nimport { Input } from '@mui/icons-material';\nimport baseUrl, { api } from '../../pages/Urls';\nimport { IonContent } from '@ionic/react';\nimport swal from 'sweetalert';\ntype CourseData = {\n    id: string;\n    course_name: string;\n    description: string;\n\n};\n\n\nconst CourseList: FC = () => {\n    const [course, setCourse] = useState([]);\n\n    const fetchCourse = () => {\n        fetch(`${baseUrl}${api.allCourse}`, {\n            method: 'GET',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n\n            }\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                setCourse(resp.reverse())\n            })\n    }\n    useEffect(() => {\n        fetchCourse();\n\n    }, [])\n\n    const columns = useMemo<MRT_ColumnDef<CourseData>[]>(\n        () => [\n\n\n            {\n                accessorKey: 'course_name',\n                header: 'Course Name',\n\n            },\n            {\n                accessorKey: 'description',\n                header: 'Description',\n\n            },\n\n        ],\n        [],\n    );\n\n    const enroleCourse = (id: any) => {\n        if (window.confirm('Want to enrole this course?')) {\n\n            let data = {\n                'course_id': id,\n            }\n            fetch(`${baseUrl}${api.courseEnrole}`, {\n                method: 'POST',\n                headers: {\n                    Accept: 'application/json',\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n                },\n                body: JSON.stringify(data),\n\n            })\n\n                .then(response => {\n                    if (response.status === 200) {\n                        fetchCourse();\n                        swal({\n                            title: \"Success!\",\n                            text: \"Course enroled successfully\",\n                            icon: \"success\",\n                        });\n                    }\n                    else {\n                        throw Error([response.status, response.statusText].join(' '));\n                    }\n                })\n\n                .catch(error => console.log('error', error));\n\n        }\n\n    }\n    return (\n        <IonContent>\n            <div className=\"container mt-5\">\n                <h1 className='text-center mb-2'>List of Courses</h1>\n                {localStorage.getItem(\"role\") == 'ar_instructor' ?\n                    <MaterialReactTable\n                        columns={columns}\n                        data={course}\n                        getRowId={(row => `${row.id}`)}\n                        enableRowNumbers\n                        enableColumnOrdering\n\n                    />\n                    :\n                    <MaterialReactTable\n                        columns={columns}\n                        data={course}\n                        getRowId={(row => `${row.id}`)}\n                        enableRowActions\n                        enableRowNumbers\n                        enableColumnOrdering\n                        renderRowActions={({ row, table }) => (\n                            <Box sx={{ display: 'flex', gap: '1rem' }}>\n\n                                <Tooltip arrow placement=\"right\" title=\"Enrole-course\">\n                                    <IconButton style={{ color: \"green\" }} onClick={() => enroleCourse(row.id)}>\n                                        <Input />\n                                    </IconButton>\n                                </Tooltip>\n\n                            </Box>\n                        )}\n\n                    />\n                }\n\n\n            </div>\n        </IonContent>\n\n    );\n\n};\n\nexport default CourseList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}